ğŸ”µ Hadoop ç¯å¢ƒæ­å»º (Docker)

    å­¦ä¹ hadoop. éœ€è¦ä¸€ä¸ªæœ€åŸºæœ¬çš„ hadoop ç¯å¢ƒ: ä¸€å° master ä¸¤å° slave
        ä¸‰å°ç”µè„‘å¯ä»¥ç”¨å®ä½“æœº. ä¹Ÿå¯ä»¥ç”¨è™šæ‹Ÿæœº(vmware / vbox / Docker)
        æˆ‘ä»¬åªæœ‰ä¸€å°ç¬”è®°æœ¬.æ‰€ä»¥é€‰æ‹©docker.  vm/vb è·‘ä¸‰ä¸ªè™šæ‹Ÿæœºå®åœ¨å¤ªå¡äº†. 
        Mac åŸç”Ÿæ˜¯ä¸æ”¯æŒdockerçš„. è™½ç„¶Docker å®˜æ–¹ä¹Ÿæä¾›Mac çš„å®‰è£…åŒ…,ä½†æ˜¯ä¸å¥½ç”¨.
        å¼ºçƒˆå»ºè®®åœ¨ Ubuntu/Debian/CentOS è¿™æ ·çš„å¹³å°è¿è¡Œ Docker
        Linux å†…æ ¸ç‰ˆæœ¬å¿…é¡»æ˜¯ 2.6ä»¥ä¸Šçš„. ä¹Ÿå°±æ˜¯ CentOS7 ä¹‹åçš„.

      æˆ‘ä»¬åœ¨Macä¸Šæ­å»º. CentOS7 çš„è™šæ‹Ÿæœº.
      åœ¨Centos7 ä¸Šæ­å»ºDockerç¯å¢ƒ.
      åœ¨Docker ä¸­ æ­å»ºä¸¤ä¸ªcentos slave è™šæ‹Ÿæœº
      ç°åœ¨æˆ‘ä»¬å°±æœ‰ä¸‰ä¸ªcentosäº†; ä¸€ä¸ª vmå‡ºæ¥çš„centos; ä¸¤ä¸ª docker å‡ºæ¥çš„ centos..


    hadoop é›†ç¾¤è§„åˆ’.
        ä¸‰å°ç”µè„‘èƒ½ç›¸äº’é€šä¿¡å°±å¯ä»¥äº†.
        192.168.10.11  hadoop1  namenode
        192.168.10.12  hadoop2  datanode
        192.168.10.13  hadoop3  datanode

    ä¿®æ”¹æ¯å°ç”µè„‘çš„ä¸»æœºå: hadoop1 /hadoop2 /hadoop3

    å»ºç«‹ ip å’Œ åŸŸåçš„å…³ç³». hosts æ–‡ä»¶æ·»åŠ ä¸‹é¢çš„å°±å¯ä»¥.
      192.168.10.11 hadoop1
      192.168.10.12 hadoop2
      192.168.10.13 hadoop3

    å…³é—­é˜²ç«å¢™
    SSH æ— ç§˜é’¥è®¤è¯
    NTPæ—¶é—´åŒæ­¥

        é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºå¿…é¡»ä¿æŒæ—¶é—´åŒæ­¥ï¼Œå¦‚æœæ—¶é—´ç›¸å·®è¾ƒå¤§ä¼šå¼•èµ·å„ç§é—®é¢˜ã€‚
        å…·ä½“æ€è·¯å¦‚ä¸‹ï¼šmasterèŠ‚ç‚¹ä½œä¸ºntpæœåŠ¡å™¨ï¼Œå¯¹æ‰€æœ‰datanodeèŠ‚ç‚¹æä¾›æ—¶é—´åŒæ­¥æœåŠ¡ã€‚
        æ‰€æœ‰datanodeèŠ‚ç‚¹ä»¥masterèŠ‚ç‚¹ä¸ºåŸºç¡€åŒæ­¥æ—¶é—´
        æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ç›¸å…³ç»„ä»¶ï¼šyum install ntpã€‚
        å®Œæˆåï¼Œé…ç½®å¼€æœºå¯åŠ¨ï¼šchkconfig ntpd on,
        æ£€æŸ¥æ˜¯å¦è®¾ç½®æˆåŠŸï¼šchkconfig --list ntpdå…¶ä¸­2-5ä¸ºonçŠ¶æ€å°±ä»£è¡¨æˆåŠŸ




ğŸ”µ CentOS7 X64 è™šæ‹Ÿæœº(Vmware)
    .... æ­å»ºè‡ªå·±è§£å†³.è™šæ‹Ÿæœºéƒ½æ­ä¸èµ·æ¥ å°±åˆ«æŠ˜è…¾äº†...
    æˆ‘é€‰æ‹©çš„æ˜¯æœ€å°å®‰è£…. ä¹Ÿå°±æ˜¯ä¸å¸¦ç•Œé¢çš„..

    ğŸ”¸ç½‘ç»œ
    æ­å»ºå¥½åçœ‹ è™šæ‹Ÿæœºèƒ½ä¸èƒ½ä¸Šç½‘.ä¸€èˆ¬æ¥è¯´ç½‘ç»œæ˜¯æ²¡æœ‰å¯åŠ¨çš„.éœ€è¦è®¾ç½®
    Centos ç”¨ ipå‘½ä»¤ ä»£æ›¿äº† ifconfig.
        ip link show                                        # æ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯
        ip link set eth0 up                                # å¼€å¯ç½‘å¡
        ip link set eth0 down                               # å…³é—­ç½‘å¡
        ip addr show                                        # æ˜¾ç¤ºç½‘å¡IPä¿¡æ¯
        ip addr add 192.168.0.1/24 dev eth0                 # è®¾ç½®eth0ç½‘å¡IPåœ°å€192.168.0.1
        ip addr del 192.168.0.1/24 dev eth0                 # åˆ é™¤eth0ç½‘å¡IPåœ°å€
        ip route list                                       # æŸ¥çœ‹è·¯ç”±ä¿¡æ¯
        ip route add default via  192.168.0.254  dev eth0   # è®¾ç½®é»˜è®¤ç½‘å…³ä¸º192.168.0.254

æŸ¥çœ‹ç½‘å¡çŠ¶æ€: âœ  ip addr âœ  æœ‰status UPã€ststus DOWNçš„.
UP å°±è¯´æ˜ç½‘å¡å¼€å¯äº†.
Down å°±è¯´æ˜ç½‘å¡æ²¡å¼€å¯.

æ‰¾åˆ°æœ‰ ipå’Œå¹¿æ’­åœ°å€çš„é‚£ä¸ªç½‘å¡. æˆ‘è¿™é‡Œæ˜¯ virbr0
å‘ç°è¿™ä¸ªç½‘å¡ åªæœ‰ç½‘æ®µ.æ²¡æœ‰IPåœ°å€!!!
å¿…é¡»æœ‰IPåœ°å€.æ‰èƒ½æ­£å¸¸å¼€å¯ç½‘å¡çš„...
æ‰€ä»¥è¦å…ˆè®¾ç½® IPåœ°å€..

ip link set virbr0 up
    
    
    
    
     å¼€å¯sshè¿œç¨‹(é»˜è®¤è‡ªå¸¦sshæœåŠ¡çš„)!!! 
service sshd status  âœ  æ­£å¸¸åº”è¯¥æ˜¯è¿è¡Œçš„.
service listening on 0.0.0.0 port 22 âœ  è¯´æ˜åªå…è®¸CentOS å†…éƒ¨è¿æ¥ssh.
å¤–éƒ¨çš„ç¬”è®°æœ¬æ˜¯è¿ä¸è¿›å»çš„.æ‰€ä»¥è¦æ”¹è®¾ç½®.




    ifconfig âœ  çœ‹ip âœ  192.168.122.1






ğŸ”µ Docker åŸºæœ¬ä½¿ç”¨




Docker :

è½»é‡çº§è™šæ‹Ÿæœº! æ˜¯ä¸€ä¸ªè¿›ç¨‹ ä¸æ˜¯ä¸€å°æœºå™¨.
ä¸¤ä¸ªç¨‹åº  æœåŠ¡ç«¯ å’Œ å®¢æˆ·ç«¯.  æœåŠ¡ç«¯ç®¡ç†æ‰€æœ‰å®¹å™¨.


Docker ä¼šä¸ºæ‰€æœ‰å·²ç»è¿è¡Œï¼ˆåŒ…æ‹¬å·²ç»åœæ­¢ï¼‰çš„å®¹å™¨éšæœºåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åå­—å’Œä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œ
docker å‘½ä»¤å¯ä»¥è¯†åˆ« IDï¼Œä¹Ÿå¯ä»¥è¯†åˆ«è¿™ä¸ªåå­—ã€‚
docker ps -a æ¥æ˜¾ç¤º 

æ¯æ¬¡è¿è¡Œ docker run å‘½ä»¤çš„æ—¶å€™ï¼ŒDocker éƒ½ä¼šæ–°å»ºä¸€ä¸ªå”¯ä¸€çš„å®¹å™¨ID ï¼Œ â†’ ä¸åŒçš„å®¹å™¨ æ•°æ®æ˜¯ä¸é€šçš„... 
å·²ç»åœæ­¢çš„å®¹å™¨ é‡Œé¢çš„æ•°æ®ä¸ä¼šæ¶ˆå¤±  ç”¨ docker ps -a æ˜¾ç¤º.

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ -iï¼ˆäº¤äº’å¼ï¼‰å’Œ -tï¼ˆä¸´æ—¶ç»ˆç«¯ï¼‰å‚æ•°è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œç„¶åè¾“å…¥ä¸€äº›äº¤äº’å‘½ä»¤ï¼š

å®¹

ç‰ˆæœ¬ä¿¡æ¯:
docker version


æ˜¾ç¤ºæ‰€æœ‰å‚æ•°            Â docker
ç‰ˆæœ¬ä¿¡æ¯                   Â docker version
é•œåƒåˆ—è¡¨:                  Â docker images
é‡å‘½åé•œåƒå            Â docker tag 468e6235b128 kali:latest tag + ID + Name:latest   â†’ é»˜è®¤å®˜æ–¹åå­— æ”¹æˆ kali 
å¼€å…³å¯ Docker         Â docker run / stop kali -i -t ( Contain name ) 
è¿è¡Œä¸­çš„é•œåƒ            Â docker ps éœ€è¦æ–°å¼€ docker ç»ˆç«¯ æ‰§è¡Œ. 

ä¿å­˜&å¯åŠ¨ å®¹å™¨  å…¶å®æ˜¯æ–°åŠ æ ‡ç­¾ ç±»ä¼¼ git . è¦å…»æˆç»™å®¹å™¨æ‰“æ ‡ç­¾çš„ä¹ æƒ¯.
æ–°ç»ˆç«¯ docker ps æŸ¥çœ‹ å®¹å™¨ ID (ç»å¸¸ä¼šå˜ ä¸å›ºå®šçš„.)  è®°ä¸‹å‰3ä½æ•°å­—.
æ–°ç»ˆç«¯ docker commit 188 xujian    å°±æŠŠå®¹å™¨ä¿å­˜ä¸ºxujian äº†
å¯åŠ¨ä¿å­˜çš„å®¹å™¨:  docker -it xujian
	
	docker run ubuntu /bin/echo 'hello world'
	//  è¦æœ‰ ç³»ç»Ÿåç§° æ¯”å¦‚ ubuntu . æœ¬åœ°æ²¡æœ‰é•œåƒ  docker ä¼šè‡ªåŠ¨ä¸‹ä¸€ä¸ª. 
	
	docker inspect 698 
å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯.


å¤‡ä»½é•œåƒ    docker push xujian
åˆ é™¤å®¹å™¨   docker rm 43de70a54ec1,æˆ–è€…ç®€å†™æˆ docker rm 43de    æ¥é‡Šæ”¾ç©ºé—´.

åˆ é™¤é•œåƒ: docker rmi xujian
// å¦‚æœæœ‰å®¹å™¨(å³ä¾¿å·²ç»åœæ­¢) å­˜åœ¨.  é‚£ä¹ˆå°±ä¸èƒ½åˆ é™¤é•œåƒ. ä¸ç„¶æš‚åœçš„å®¹å™¨å°±èµ·ä¸æ¥.



æ–°å»º Docker
åˆ‡æ¢åˆ° docker
ç®¡ç†å®¹å™¨

docker run -it ubuntu bash
// å°±èƒ½è¿›åˆ° ubuntu çš„ bash äº† èƒ½è¾“å…¥å„ç§å‘½ä»¤.

docker run ubuntu
docker â†’ ä½ è¦ä½¿ç”¨ docker
run  â†’ å¼€å¯ è¿è¡Œ
ubuntu â†’ é•œåƒåç§° 


æ‰¾åˆ°é•œåƒ:
å» docker å®˜ç½‘çœ‹. 
[https://hub.docker.com/explore/]

ä¸‹è½½ mysql
docker pull mysql

ä¸‹è½½ debian
docker pull debian
 
åœ¨ docker ä¸­è¿è¡Œ hello world
docker run debian echo ''hello world''

åœ¨å®¹å™¨ä¸­å®‰è£…ç¨‹åº:

ä¿å­˜å®¹å™¨:
æŸ¥çœ‹å®¹å™¨çš„ ID :  docker ps åªéœ€å‰å‡ ä½idå°±å¥½
	docker commit 698 ubuntu


æ¯æ¬¡è¿è¡Œ éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®¹å™¨.

åˆ é™¤å®¹å™¨:
å…ˆåœæ­¢ å†åˆ é™¤
docker stop ubuntu
docker rm ubuntu














ğŸ”µ å®‰è£…/é…ç½® Docker 
    ğŸ”¸ æŸ¥çœ‹Linuxå†…æ ¸ç‰ˆæœ¬:    uname -r  âœ  å¿…é¡»å¤§äº 2.6

    ğŸ”¸ æŸ¥çœ‹Device Mapperæ˜¯å¦å®‰è£…: 
          ls -l /sys/class/misc/device-mapper
              lrwxrwxrwx 1 root root 0 May  1 20:55 /sys/class/misc/device-mapper -> ../../devices/virtual/misc/device-mapper
          å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°Device Mapperï¼Œéœ€è¦å®‰è£…device-mapperè½¯ä»¶åŒ…:
          sudo yum install -y device-mapper
          
          ç„¶åé‡æ–°åŠ è½½dm_modå†…æ ¸æ¨¡å—:
          sudo modprobe dm_mod

    ğŸ”¸ å®‰è£…docker:       sudo yum install docker
    ğŸ”¸ å¯åŠ¨Docker:       systemctl start docker
    ğŸ”¸ å‡çº§ç³»ç»Ÿ (å¿…é¡»):  sudo yum update
    ğŸ”¸ éªŒè¯å®‰è£…:         docker info
    ğŸ”¸ å¼€æœºå¯åŠ¨ (å¯é€‰):  systemctl enable docker


    ğŸ”¸ æ‹‰å– CentOS7 çš„Dockeré•œåƒ
        docker pull daocloud.io/library/centos:centos7
            daocloud.io/library/centosè¡¨ç¤ºé•œåƒçš„åå­—
            centos7è¡¨ç¤ºé•œåƒçš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latestï¼Œè¡¨ç¤ºæœ€æ–°ç‰ˆ


    ğŸ”¸ å¯åŠ¨é•œåƒ
        docker images  âœ  æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨. ç„¶åé€‰æ‹©ä¸€ä¸ªæ¥å¯åŠ¨.

        docker run -h master --dns=61.139.2.69 -it daocloud.io/library/centos:centos7
            -h	master	        æŒ‡å®šhostname
            --dns	61.139.2.69	  æŒ‡å®šDNSï¼Œé»˜è®¤çš„æ˜¯8.8.8.8,å›½å†…ç¯å¢ƒ...
            -it		              ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨

    ğŸ”¸ å®‰è£…éœ€è¦çš„è½¯ä»¶:
        sudo yum install -y wget vim openssh-server openssh-clients net-tools
            æ‹‰å–åˆ°æœ¬åœ°çš„é•œåƒæ˜¯å°½å¯èƒ½å°çš„ï¼Œæ‰€ä»¥å¾ˆå¤šå‘½ä»¤éƒ½æ²¡æœ‰å®‰è£…:
                openssh-server :  å®‰è£…sshdæœåŠ¡
                openssh-clients : å®‰è£…sshå‘½ä»¤
                net-tools :       å®‰è£…netstat, ifconfigç­‰å‘½ä»¤

    ğŸ”¸ å¯åŠ¨SSH
        å®¹å™¨æ˜¯è¢«dockerç®¡ç†çš„ï¼Œæ— æ³•ä½¿ç”¨ä¸€äº›ç³»ç»Ÿå‘½ä»¤ï¼Œè¦å¯åŠ¨sshdéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
        /usr/sbin/sshd -D &
        ä¹Ÿå°±æ˜¯åå°å¯åŠ¨sshçš„æ„æ€.  ä¹‹åå°±å¯ä»¥ç”¨sshç™»å½•å®¹å™¨äº†.

        ssh æ˜¯hadoop å¿…é¡»çš„æœåŠ¡. æ‰€ä»¥æˆ‘ä»¬è¦è®¾ç½®å¯åŠ¨å®¹å™¨å°±å¼€å¯ssh.
        ç”±äºå®¹å™¨ä¸­å¼€å¯ssh ä¸èƒ½ç”¨å¸¸è§„çš„å¼€æœºå¯åŠ¨æ–¹æ³•.æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡è„šæœ¬æ¥å®ç°.
        è¿™é‡Œä¸è®©å…¶åå°è¿è¡Œæ˜¯ä¸ºäº†ä¿è¯å®¹å™¨ä¸é€€å‡ºï¼Œåªè¦å®¹å™¨åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®¿ä¸»æœºä¸Šè¿æ¥å®¹å™¨ã€‚

            vim /root/run.sh
            chmod 750 /root/run.sh
            cat /root/run.sh
            !/bin/bash
            /usr/sbin/sshd -D


ğŸ”µ ç½‘ç»œé…ç½®

    å®‰è£…å¥½docker å‘ç°ä¸èƒ½ä¸Šç½‘. å‘ç°æ˜¯dnsçš„é—®é¢˜.
    ä¸æ€•æŠ˜è…¾çš„æˆ‘æ€ä¹ˆèƒ½å¤Ÿå¿å—æ¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨éƒ½è¦å¸¦ä¸Š--dnså‚æ•°å‘¢ï¼Œä¸€å®šå¯ä»¥æ”¹çš„ã€‚
    ä¿®æ”¹é»˜è®¤dns

    ä¿®æ”¹/etc/default/docker
        DOCKER_NETWORK_OPTIONS="--dns=61.139.2.69"

    ä¿®æ”¹/lib/systemd/system/docker.service
        ...
        [Service]
        EnviornmentFile=-/etc/default/docker
        ExecStart=/usr/bin/docker daemon -H fd:// $OPTIONS \
                  $DOCKER_NETWORK_OPTIONS
        ...

    é‡å¯docker
    systemctl daemon-reload
    systemctl restart docker.service
    #ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹ docker çš„å¯åŠ¨å‘½ä»¤æ˜¯å¦ç”Ÿæ•ˆ
    $ ps -ef | grep docker
    root     ***     1  0 5æœˆ25 ?       00:02:23 /usr/bin/docker daemon -H fd:// --dns=61.139.2.69 --registry-mirror=***


ğŸ”µ å®‰è£… JDK8
    wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u91-b14/jdk-8u91-linux-x64.tar.gz
    sudo mkdir /usr/java
    sudo tar zxf jdk-8u91-linux-x64.tar.gz -C /usr/java
    sudo echo "export JAVA_HOME=/usr/java/jdk1.8.0_91" >> /etc/bashrc
    sudo "export PATH=$PATH:$JAVA_HOME/bin" >> /etc/bashrc
    sudo echo "export CLASSPATH=$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar" >> /etc/bashrc
    source /etc/bashrc





ğŸ”µ å®‰è£…hadoop: 
  wget http://mirrors.cnnic.cn/apache/hadoop/common/hadoop-2.7.2/hadoop-2.7.2.tar.gz
  sudo mkdir /usr/local/hadoop
  sudo tar zxf hadoop-2.7.2.tar.gz -C /usr/local/hadoop
  sudo echo "export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.2" >> /etc/bashrc
  sudo echo "export HADOOP_CONFIG_HOME=$HADOOP_HOME/etc/hadoop" >> /etc/bashrc
  sudo echo "export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin" >> /etc/bashrc
  source /etc/bashrc



ğŸ”µ é…ç½® hadoop

    é…ç½®:  https://github.com/kbyyd24/blog/issues/2





ğŸ”µ å…å¯†ç ç™»å½•

    ssh-keygen -t rsa -P "" -f ~/.ssh/id_rsa
    cd ~/.ssh
    #è·å–å®¿ä¸»æœºçš„å…¬é’¥ï¼Œæ–¹ä¾¿å®¿ä¸»æœºç™»å½•
    scp melo@172.17.0.1:~/.ssh/id_rsa.pub authorized_keys
    cat id_rsa.pub >> authorized_keys
    chmod 600 authorized_keys


    è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå› ä¸ºåé¢è¿è¡Œæ—¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½ä»é•œåƒå¯åŠ¨ï¼Œé‚£éƒ½æ˜¯å…¨æ–°çš„ç¯å¢ƒï¼Œä½¿ç”¨sshç™»å½•æ—¶æ˜¯éœ€è¦ç¡®è®¤çš„ã€‚
    ä¸ºäº†é¿å…ä¸å¿…è¦çš„éº»çƒ¦ï¼Œç‰¹æ„æŸ¥äº†èµ„æ–™ï¼Œæ‰¾åˆ°è§£å†³åŠæ³•ã€‚
    æƒ³è¦è¾¾åˆ°è¿æ¥æ–°ä¸»æœºæ—¶ä¸ç”¨ç¡®è®¤çš„æ•ˆæœï¼Œå°±éœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯çš„sshé…ç½®çš„StrictHostKeyCheckingã€‚è¯¥å‚æ•°é»˜è®¤ä¸ºaskï¼Œä¿®æ”¹ä¸ºno
    Host *
      StrictHostKeyChecking no
    
    http://www.worldhello.net/2010/04/08/1026.html



ğŸ”µ Docker é…ç½®

ğŸ”¸ä¿å­˜Container
docker commit -m "hadoop installed" <container id|container name> centos:hadoop


ğŸ”¸å¯åŠ¨Hadoop

  slaveéœ€è¦çŸ¥é“masteråœ¨å“ªé‡Œï¼Œæ‰èƒ½å‘masterå‘é€å¿ƒè·³å’Œæ•°æ®å—ï¼Œå¦åˆ™masterä¸Šçš„namenodeå°†æ‰¾ä¸åˆ°datanode
  å› ä¸ºå¯¹dockerçš„ç½‘ç»œé…ç½®ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨äº†ä¸€ä¸ªç®€å•çš„åŠæ³•ï¼Œä¿®æ”¹/root/run.sh
  #!/bin/bash
  echo "172.17.0.4    master" >> /etc/network
  /usr/sbin/sshd -D
  å› ä¸ºèŠ‚ç‚¹åªæœ‰3ä¸ªï¼Œæˆ‘ä¹Ÿåªå¼€è¿™ä¸‰ä¸ªå®¹å™¨ï¼Œmasteråˆæ˜¯æœ€åå¯åŠ¨çš„ï¼Œæ‰€æœ‰masterçš„åœ°å€å°±æ˜¯172.17.0.4

  æ‰€ä»¥ä¸Šé¢åˆ›å»ºçš„é•œåƒå·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚





ğŸ”¸å¯åŠ¨å®¹å™¨

    $ docker run -d --name slave1 centos:hadoop /root/run.sh
    $ docker run -d --name slave2 centos:hadoop /root/run.sh
    $ docker run -d --name master -h master -P --link slave1:slave1 --link slave2:slave2 centos:hadoop /root/run.sh

    æˆ‘å°†ä»¥ä¸Šä¸‰ä¸ªå‘½ä»¤å†™åˆ°äº†ä¸€ä¸ªå¯åŠ¨è„šæœ¬é‡Œï¼Œç›´æ¥å°±å¯ä»¥å¯åŠ¨äº†ï¼Œç„¶ååœ¨ç”¨sshç™»å½•åˆ°masterä¸Šå¯åŠ¨hadoop
    å› ä¸ºä½¿ç”¨çš„æ˜¯dockerçš„é»˜è®¤ç½‘ç»œï¼Œæ‰€æœ‰å¯ä»¥ç®—å‡ºmasterçš„IPåœ°å€ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡docker netword inspect bridgeå‘½ä»¤å»è·å–


ğŸ”¸ å¯åŠ¨ Hadoop

  åˆ‡æ¢åˆ°$HADOOP_HOMEç›®å½•ï¼Œé¦–å…ˆæ ¼å¼åŒ–namenode:

  ./bin/hadoop namenode -format

  ç„¶åå°±å¯ä»¥å¯åŠ¨Hadoopäº†

  å°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ æŸ¥çœ‹web ç®¡ç†æ¥å£!!

  è¯¦ç»†æ–‡ç« : https://github.com/kbyyd24/blog/issues/2


