â¤ï¸ Hadoop ç¯å¢ƒæ­å»º

      å­¦ä¹ hadoop. éœ€è¦ä¸€ä¸ªæœ€åŸºæœ¬çš„ hadoop ç¯å¢ƒ: ä¸€å° master ä¸¤å° slave
          ä¸‰å°ç”µè„‘å¯ä»¥ç”¨å®ä½“æœº. ä¹Ÿå¯ä»¥ç”¨è™šæ‹Ÿæœº(vmware / vbox / Docker)
          æˆ‘ä»¬åªæœ‰ä¸€å°ç¬”è®°æœ¬.æ‰€ä»¥é€‰æ‹©docker.  vm/vb è·‘ä¸‰ä¸ªè™šæ‹Ÿæœºå®åœ¨å¤ªå¡äº†. 
          Mac åŸç”Ÿæ˜¯ä¸æ”¯æŒdockerçš„. è™½ç„¶Docker å®˜æ–¹ä¹Ÿæä¾›Mac çš„å®‰è£…åŒ…,ä½†æ˜¯ä¸å¥½ç”¨.
          å¼ºçƒˆå»ºè®®åœ¨ Ubuntu/Debian/CentOS/Kali è¿™æ ·çš„Linuxå¹³å°è¿è¡Œ Docker
          Linux å†…æ ¸ç‰ˆæœ¬å¿…é¡»æ˜¯ 2.6ä»¥ä¸Šçš„. æ¨èCentOS 7+

        æˆ‘ä»¬åœ¨Macä¸Šæ­å»º. CentOS7 çš„è™šæ‹Ÿæœº.
        åœ¨Centos7 ä¸Šæ­å»ºDockerç¯å¢ƒ.
        åœ¨Docker ä¸­ æ­å»ºä¸¤ä¸ªcentos slave è™šæ‹Ÿæœº
        ç°åœ¨æˆ‘ä»¬å°±æœ‰ä¸‰ä¸ªcentosäº†; ä¸€ä¸ª vmå‡ºæ¥çš„centos; ä¸¤ä¸ª docker å‡ºæ¥çš„ centos..



â¤ï¸ CentOS7 ç½‘ç»œé…ç½® 
      è™šæ‹Ÿæœºå®‰è£…çš„æ—¶å€™é€‰æ‹©å¸¦ç•Œé¢çš„GUIæ¨¡å¼!!! ä¸è¦é€‰æœ€å°åŒ–.CLIæ¨¡å¼æ€•ä½ ç½‘ç»œéƒ½é…ç½®ä¸å¥½.

      ğŸ”¸ å»ç•Œé¢è®¾ç½®å›ºå®šIP
           service network restart âœ  é‡å¯ç½‘ç»œæœåŠ¡æ¥ç”Ÿæ•ˆ 

      ğŸ”¸ æŸ¥çœ‹sshè¿œç¨‹è®¾ç½®(é»˜è®¤è‡ªå¸¦sshæœåŠ¡,å¹¶ä¸”å¼€å¯çš„)!!! 
            service sshd status  âœ  æ­£å¸¸åº”è¯¥æ˜¯è¿è¡Œçš„.
            service listening on 0.0.0.0 port 22 âœ  è¯´æ˜ CentOS æ˜¯å…è®¸æ‰€æœ‰ç”µè„‘è¿›è¡Œè¿œç¨‹çš„.

      ğŸ”¸ å…å¯†ç SSHç™»å½•è®¾ç½®
            å®¢æˆ·ç«¯: ğŸ”… cd /Users/v/.ssh/
                // Macçš„å…¬é’¥æ˜¯åœ¨è¿™ä¸ªä½ç½®çš„.
            æœåŠ¡å™¨: ğŸ”… mkdir ~/.ssh
                // æ–‡ä»¶æ˜¯ä¼ åˆ° æœåŠ¡å™¨å¯¹åº”ç”¨æˆ·çš„.sshç›®å½•ä¸‹çš„. å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹.ä½ å¾—è‡ªå·±å»ºç«‹.
            å®¢æˆ·ç«¯: ğŸ”… scp -r id_rsa.pub root@192.168.169.111:~/.ssh/   
                // scp è¿™é‡Œæœ‰å¯èƒ½è¿ä¸æ˜¯è™šæ‹Ÿæœº. 
                // ssh è®¤è¯æ˜¯åŒå‘çš„. 
                // ä½ è¿è¿‡å“ªäº›æœåŠ¡å™¨çš„IP. æœ¬åœ°æŠŠæœåŠ¡å™¨çš„å…¬é’¥ä¹Ÿä¿å­˜ä¸‹æ¥çš„!!
                // ä¸€æ—¦ä½ æœåŠ¡å™¨é‡è£…ç³»ç»Ÿ. ä¹Ÿå°±æ„å‘³ç€æœåŠ¡å™¨çš„å…¬é’¥å˜äº†.
                // ä¸€æ—¦ä½ åœ¨æœ¬åœ°ç”¨åŒæ ·çš„ipè¿é‡è£…ç³»ç»Ÿçš„æœåŠ¡å™¨.å°±ä¼šå¯¼è‡´æœåŠ¡å™¨çš„å…¬é’¥å’Œæœ¬åœ°ä¹‹å‰å­˜çš„æœåŠ¡å™¨å…¬é’¥ä¸ä¸€è‡´.
                // è¿™äº›è®°å½•åœ¨ /Users/v/.ssh/ çš„ known_hostsæ–‡ä»¶ä¸­.
                // å¦‚æœæŸæœåŠ¡å™¨ç™»å½•ä¸äº†. å¯ä»¥è¯•ç€åœ¨è¿™æ–‡ä»¶é‡Œé¢åˆ é™¤å¯¹åº”çš„æœåŠ¡å™¨å…¬é’¥.
            æœåŠ¡å™¨: ğŸ”… cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys

      ğŸ”¸ è™šæ‹Ÿæœºè®¾ç½®å¿«ç…§æ¥å¤‡ä»½
          é€‰æ‹©è™šæ‹Ÿæœº âœ  å³é”® âœ  snapshot âœ  take ..



â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸
â¤ï¸ å®‰è£…/é…ç½® Docker  (Kali)

      è¦å®‰è£…Docker Kaliç³»ç»Ÿå¿…é¡»æ˜¯ 64ä½çš„.
      ä¸€é”®å®‰è£…è„šæœ¬: https://gist.github.com/apolloclark/f0e3974601346883c731
          è¯´è¯´æœ€åå‡ æ­¥.
          sudo service docker restart
              é‡å¯ä¹‹å.sshå°±æŒ‚äº†...
              22ç«¯å£ æ‹’ç»è¿æ¥... ä¼°è®¡æ˜¯docker å¹²çš„äº‹æƒ….
              nmap 127.0.0.1  å±…ç„¶ä¸€ä¸ªç«¯å£éƒ½æ²¡å¼€...
              /etc/init.d/ssh status  æœåŠ¡æ²¡å¯åŠ¨.
              /etc/init.d/ssh start   å¯åŠ¨æœåŠ¡å°±å¯ä»¥äº†.
              é—®é¢˜æ˜¯å¼€æœºå¯åŠ¨ä¼°è®¡ä¹ŸæŒ‚äº†...
              /etc/rc.local æ–‡ä»¶é‡ŒåŠ å…¥/etc/init.d/ssh start è¿™è¡Œå°±å¯ä»¥äº†.
              æ³¨æ„å¥½åƒè¦åŠ åˆ° æœ€åä¸€è¡Œçš„ exit 0 è¡Œå‰é¢.


â¤ï¸ å®‰è£…/é…ç½® Docker  (CentOS 7)

      ğŸ”¸ æ£€æŸ¥Linuxå†…æ ¸ç‰ˆæœ¬:    uname -r  âœ  å¿…é¡»å¤§äº 2.6
      ğŸ”¸ æ£€æŸ¥Device Mapperæ˜¯å¦å®‰è£…: 
            ls -l /sys/class/misc/device-mapper
            æœ‰ä¿¡æ¯è¾“å‡ºå°±å¯ä»¥.å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°.éœ€è¦å®‰è£…device-mapperè½¯ä»¶åŒ…:
            sudo yum install -y device-mapper
            
            ç„¶åé‡æ–°åŠ è½½dm_modå†…æ ¸æ¨¡å—:
            sudo modprobe dm_mod

      ğŸ”¸ å®‰è£…docker:       sudo yum install docker
          /var/run/yum.pid å·²è¢«é”å®šé”™è¯¯:ç½‘ä¸Šç»Ÿä¸€çš„è§£å†³åŠæ³•ï¼š
          ç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œ rm -f /var/run/yum.pid å°†è¯¥æ–‡ä»¶åˆ é™¤ï¼Œç„¶åå†æ¬¡è¿è¡Œyumã€‚

      ğŸ”¸ å¯åŠ¨Docker:       systemctl start docker
      ğŸ”¸ å‡çº§ç³»ç»Ÿ (å¿…é¡»):  sudo yum update
      ğŸ”¸ éªŒè¯å®‰è£…:         docker info
      ğŸ”¸ å¼€æœºå¯åŠ¨ (å¯é€‰):  systemctl enable docker
â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸â¬›ï¸





ğŸ”µ Docker ç®€ä»‹

    Docker :  è½»é‡çº§è™šæ‹Ÿæœº! æ˜¯ä¸€ä¸ªè¿›ç¨‹ ä¸æ˜¯ä¸€å°æœºå™¨.
    ä¸¤ä¸ªç¨‹åº:  æœåŠ¡ç«¯ å’Œ å®¢æˆ·ç«¯.  æœåŠ¡ç«¯ç®¡ç†æ‰€æœ‰å®¹å™¨.
    Docker ä¼šä¸ºæ‰€æœ‰å·²ç»è¿è¡Œï¼ˆåŒ…æ‹¬å·²ç»åœæ­¢ï¼‰çš„å®¹å™¨éšæœºåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åå­—å’Œä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œ
    docker ç›¸å…³çš„å‘½ä»¤éƒ½å¯ä»¥è¯†åˆ« IDï¼Œä¹Ÿå¯ä»¥è¯†åˆ«è¿™ä¸ªåå­—ã€‚
    æ¯æ¬¡è¿è¡Œ docker run å‘½ä»¤çš„æ—¶å€™ï¼ŒDocker éƒ½ä¼šæ–°å»ºä¸€ä¸ªå”¯ä¸€çš„å®¹å™¨ID ï¼Œ â†’ ä¸åŒçš„å®¹å™¨ æ•°æ®æ˜¯ä¸é€šçš„... 
    ğŸ“Œ å·²ç»åœæ­¢å®¹å™¨é‡Œé¢çš„æ•°æ®ä¸ä¼šæ¶ˆå¤±!!!  ç”¨ docker ps -a æ˜¾ç¤º.
    æ¯æ¬¡è¿è¡Œ éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å®¹å™¨.
    åˆ é™¤å®¹å™¨(å…ˆåœå†åˆ ): âœ  docker stop ubuntu  âœ docker rm ubuntu


docker                                      âœ  æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤             
docker version                              âœ  ç‰ˆæœ¬ä¿¡æ¯ 


é•œåƒå®˜ç½‘:    https://hub.docker.com/explore/
å¯ä»¥æœç´¢å„ç§é•œåƒ å¦‚centos    https://hub.docker.com/_/centos/
å½“ç„¶å›½å†…ä¸‹è½½å¾ˆæ…¢!!! æœ€ç®€å•çš„ä¸ŠVPN!!!!


docker pull centos                          ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆ(centos7 )
docker pull centos:centos6                  å¦‚æœè¦ä¸‹è½½å…¶ä»–ç‰ˆæœ¬å°±è¦æŒ‡å®š ç‰ˆæœ¬å·.




docker pull mysql                           âœ ä¸‹è½½é•œåƒ mysql   
docker pull debian                          âœ ä¸‹è½½é•œåƒ debian 
docker pull [é€‰é¡¹] [Docker Registryåœ°å€]<ä»“åº“å>:<æ ‡ç­¾>
ä¸Šé¢çš„å‘½ä»¤ä¸­æ²¡æœ‰ç»™å‡º Docker Registry åœ°å€ï¼Œå› æ­¤å°†ä¼šä» Docker Hub è·å–é•œåƒã€‚è€Œé•œåƒåç§°æ˜¯ ubuntu:14.04ï¼Œå› æ­¤å°†ä¼šè·å–å®˜æ–¹é•œåƒ library/ubuntu ä»“åº“ä¸­æ ‡ç­¾ä¸º 14.04 çš„é•œåƒã€‚



docker images                               âœ  æ˜¾ç¤ºé•œåƒåˆ—è¡¨             
        root@kali:~# docker images
        REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE
        xujian                       latest              f8905cc29b7e        44 minutes ago      335MB
        daocloud.io/library/centos   centos7             a8493f5f50ff        4 days ago          192MB
        hello-world                  latest              48b5124b2768        2 months ago        1.84kB

ğŸ“Œ è¯­æ³•: docker âœš run/stop âœš ç³»ç»Ÿåç§° âœš -i(äº¤äº’å¼) âœš -t(ä¸´æ—¶ç»ˆç«¯) âœš å®¹å™¨å 
docker run ubuntu                            âœ  docker(ä½¿ç”¨ dockerå‘½ä»¤); run(å¼€å¯è¿è¡Œ); ubuntu(é•œåƒåç§°) 
docker run -it xujian bash                   âœ  ç”¨docker å¯åŠ¨xujianè¿™ä¸ªé•œåƒ. å¹¶è¿›å…¥äº¤äº’æ¨¡å¼

docker run debian echo ''hello world''       âœ  ç”¨ debianè¿™ä¸ªç³»ç»Ÿ.æ‰§è¡Œ: echo ''hello world''   è¿™ä¸ªå‘½ä»¤
docker run ubuntu /bin/echo 'hello world'    âœ  ç”¨ ubuntuè¿™ä¸ªç³»ç»Ÿ.æ‰§è¡Œ: /bin/echo 'hello world'è¿™ä¸ªå‘½ä»¤. (æœ¬åœ°å¦‚æœæ²¡æœ‰ubuntuè¿™ä¸ªé•œåƒ, dockerä¼šè‡ªåŠ¨ä¸‹ä¸€ä¸ª)
docker run -it ubuntu bash                   âœ  ç”¨ ubuntuè¿™ä¸ªç³»ç»Ÿ.æ‰§è¡Œ bash è¿™ä¸ªå‘½ä»¤. è¿›å…¥ ubuntu çš„bashçš„æ„æ€.

docker ps -a                                 âœ  æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨.   
docker ps                                    âœ  æ˜¾ç¤ºè¿è¡Œä¸­å®¹å™¨.  æŸ¥çœ‹å®¹å™¨ ID (ç»å¸¸ä¼šå˜ ä¸å›ºå®šçš„.)  è®°ä¸‹å‰3ä½æ•°å­—. 
        root@kali:~# docker ps
        CONTAINER ID    IMAGE                                COMMAND        CREATED             STATUS             PORTS  NAMES
        96e03f352e26    daocloud.io/library/centos:centos7   "/bin/bash"    About an hour ago   Up About an hour          clever_poitras

docker commit 188 xujian                     âœ  å®¹å™¨ä¿å­˜ä¸ºxujian  åŸç†ç±»ä¼¼ git. è¦å…»æˆç»™å®¹å™¨æ‰“æ ‡ç­¾çš„ä¹ æƒ¯.
docker -it xujian                            âœ  å¯åŠ¨ä¿å­˜çš„å®¹å™¨.


docker inspect 698    å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯.

docker stop 96e03f352e26
docker stop 96e

docker tag 468e6235b128 kali:latest tag + ID + Name:latest   â†’é‡å‘½åé•œåƒå              é»˜è®¤å®˜æ–¹åå­— æ”¹æˆ kali 
  
docker push xujian         å¤‡ä»½é•œåƒ   
docker rm 43de70a54ec1,    åˆ é™¤å®¹å™¨   æ¥é‡Šæ”¾ç©ºé—´.
docker rm 43de             åˆ é™¤å®¹å™¨   ç®€å†™æ–¹å¼

docker rmi xujian    åˆ é™¤é•œåƒ:// å¦‚æœæœ‰å®¹å™¨(å³ä¾¿å·²ç»åœæ­¢) å­˜åœ¨.  å°±ä¸èƒ½åˆ é™¤é•œåƒ. ä¸ç„¶æš‚åœçš„å®¹å™¨å°±èµ·ä¸æ¥.








â¤ï¸ Docker æ“ä½œ

    ğŸ”¸ æ‹‰å– CentOS7 çš„Dockeré•œåƒ
            docker pull daocloud.io/library/centos:centos7
                daocloud.io/library/centosè¡¨ç¤ºé•œåƒçš„åå­—
                centos7è¡¨ç¤ºé•œåƒçš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latestï¼Œè¡¨ç¤ºæœ€æ–°ç‰ˆ
                é•œåƒåªæœ‰70MB.å¾ˆå¿«çš„.


    ğŸ”¸ å¯åŠ¨é•œåƒ
        docker images  âœ  æŸ¥çœ‹æœ¬åœ°é•œåƒåˆ—è¡¨. ç„¶åé€‰æ‹©ä¸€ä¸ªæ¥å¯åŠ¨.

        docker run -h master --dns=61.139.2.69 -it daocloud.io/library/centos:centos7
        // è¿™æ ·å°±è¿›å…¥ centOSäº†!!!
        // è¿™é‡Œæœ‰é—®é¢˜. ping ipå¯ä»¥ ping ç½‘ç«™å°±ä¸è¡Œ.. æ¢ä¸ªdnsè¯•è¯•...

            -h	master	        æŒ‡å®šhostname
            --dns	61.139.2.69	  æŒ‡å®šDNSï¼Œé»˜è®¤çš„æ˜¯8.8.8.8,å›½å†…ç¯å¢ƒ...
            -it		              ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨

    ğŸ”¸ å®‰è£… CentOS éœ€è¦çš„è½¯ä»¶:
          yum install -y wget vim openssh-server openssh-clients net-tools
              æ‹‰å–åˆ°æœ¬åœ°çš„é•œåƒæ˜¯å°½å¯èƒ½å°çš„ï¼Œæ‰€ä»¥å¾ˆå¤šå‘½ä»¤éƒ½æ²¡æœ‰å®‰è£…:
                  ğŸ“Œopenssh-server âœ å®‰è£…sshdæœåŠ¡
                  ssh -V âœ æŸ¥çœ‹SSHç‰ˆæœ¬



                  openssh-clients : å®‰è£…sshå‘½ä»¤
                  net-tools :       å®‰è£…netstat, ifconfigç­‰å‘½ä»¤

    ğŸ”¸ å¯åŠ¨SSH
        å®¹å™¨æ˜¯è¢«dockerç®¡ç†çš„ï¼Œæ— æ³•ä½¿ç”¨ä¸€äº›ç³»ç»Ÿå‘½ä»¤ï¼Œè¦å¯åŠ¨sshdéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
        /usr/sbin/sshd -D &
        ä¹Ÿå°±æ˜¯åå°å¯åŠ¨sshçš„æ„æ€.  ä¹‹åå°±å¯ä»¥ç”¨sshç™»å½•å®¹å™¨äº†.
        Could not load host key: /etc/ssh/ssh_host_ecdsa_key
        è¿™é‡Œä¼šæŠ¥é”™...
        å¯¼è‡´è¯¥é—®é¢˜çš„æ ¹æºæ˜¯ï¼Œsshdå®ˆæŠ¤è¿›ç¨‹ä¸çŸ¥æ€ä¹ˆåœ°ä¸èƒ½åŠ è½½SSHä¸»æœºå¯†é’¥äº†ã€‚
        å½“OpenSSHæœåŠ¡å™¨ç¬¬ä¸€æ¬¡å®‰è£…åˆ°Linuxç³»ç»Ÿæ—¶ï¼ŒSSHä¸»æœºå¯†é’¥åº”è¯¥ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¾›åç»­ä½¿ç”¨ã€‚
        å¦‚æœï¼Œä¸ç®¡æ€æ ·ï¼Œå¯†é’¥ç”Ÿæˆè¿‡ç¨‹æ²¡æœ‰æˆåŠŸå®Œæˆï¼Œé‚£å°±ä¼šå¯¼è‡´è¿™æ ·çš„SSHç™»å½•é—®é¢˜ã€‚

    è®©æˆ‘ä»¬æ£€æŸ¥èƒ½å¦åœ¨ç›¸åº”çš„åœ°æ–¹æ‰¾åˆ°SSHä¸»æœºå¯†é’¥ã€‚
    ls -al /etc/ssh/ssh*key 
    å¦‚æœSSHä¸»æœºå¯†é’¥åœ¨é‚£é‡Œæ‰¾ä¸åˆ°ï¼Œæˆ–è€…å®ƒä»¬çš„å¤§å°è¢«æˆªæ–­æˆä¸º0ï¼ˆå°±åƒä¸Šé¢é‚£æ ·ï¼‰ï¼Œä½ éœ€è¦ä»å¤´å¼€å§‹é‡æ–°ç”Ÿæˆä¸»æœºå¯†é’¥ã€‚
    åœ¨Debianã€Ubuntuæˆ–å…¶è¡ç”Ÿç‰ˆä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨dpkg-reconfigureå·¥å…·æ¥é‡æ–°ç”ŸæˆSSHä¸»æœºå¯†é’¥ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

    å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨SSHç™»å½•è¿œç¨‹ä¸»æœºæ—¶ï¼Œä¼šå‡ºç°æ²¡æœ‰æ‰¾åˆ°ä¸»æœºå¯†é’¥çš„æç¤ºä¿¡æ¯ã€‚è¾“å…¥"yes"åï¼Œç³»ç»Ÿä¼šå°†è¿œç¨‹ä¸»æœºçš„å¯†é’¥åŠ å…¥åˆ°ä½ çš„ä¸»ç›®å½•ä¸‹çš„ .ssh/known_hosts æ–‡ä»¶é‡Œï¼ˆæˆ‘ç”¨çš„æ˜¯Mac OS Xï¼‰ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç»§ç»­æ“ä½œäº†ã€‚å› ä¸ºè¿œç¨‹ä¸»æœºçš„å¯†é’¥å·²ç»åŠ å…¥åˆ°sshå®¢æˆ·ç«¯çš„å·²çŸ¥ä¸»æœºåˆ—è¡¨ä¸­ï¼Œå½“ä½ ç¬¬äºŒæ¬¡ç™»é™†è¿œç¨‹ä¸»æœºæ—¶ï¼Œåªéœ€è¦ä½ è¾“å…¥è¿œç¨‹ä¸»æœºçš„ç™»å½•å¯†ç å³å¯ã€‚å¦‚æœè¿œç¨‹ä¸»æœºçš„å¯†é’¥å‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šçœ‹åˆ°ä¸€äº›è­¦å‘Šä¿¡æ¯ã€‚åœ¨è¾“å…¥â€œyesâ€ä¹‹å‰å‘¢ï¼Œæœ€ä½³çš„é€‰æ‹©æˆ–è®¸æ˜¯è”ç³»ç³»ç»Ÿç®¡ç†å‘˜æ¥åˆ†æä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸»æœºéªŒè¯ç æ”¹å˜çš„ä¿¡æ¯ï¼Œæ ¸å¯¹ä¸»æœºéªŒè¯ç æ˜¯å¦æ­£ç¡®ã€‚






    ä¸»æœºå¯†é’¥ç”Ÿæˆ:
    ssh-keygen -t rsa
    ä¸€è·¯å›è½¦.  è®°ä½ä¸‹é¢ä¸¤ä¸ªè·¯å¾„..
    Your identification has been saved in /root/.ssh/id_rsa.
    Your public key has been saved in /root/.ssh/id_rsa.pub.

    id_rsa æ˜¯ç§é’¥ï¼Œid_rsa.pub æ˜¯å…¬é’¥








        systemctl start sshd.service
        å¯åŠ¨sshæœåŠ¡:




        ssh æ˜¯hadoop å¿…é¡»çš„æœåŠ¡. æ‰€ä»¥æˆ‘ä»¬è¦è®¾ç½®å¯åŠ¨å®¹å™¨å°±å¼€å¯ssh.
        ç”±äºå®¹å™¨ä¸­å¼€å¯ssh ä¸èƒ½ç”¨å¸¸è§„çš„å¼€æœºå¯åŠ¨æ–¹æ³•.æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡è„šæœ¬æ¥å®ç°.
        è¿™é‡Œä¸è®©å…¶åå°è¿è¡Œæ˜¯ä¸ºäº†ä¿è¯å®¹å™¨ä¸é€€å‡ºï¼Œåªè¦å®¹å™¨åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®¿ä¸»æœºä¸Šè¿æ¥å®¹å™¨ã€‚

            vim /root/run.sh
            chmod 750 /root/run.sh
            cat /root/run.sh
            !/bin/bash
            /usr/sbin/sshd -D














ğŸ”µ ç½‘ç»œé…ç½®

    å®‰è£…å¥½docker å‘ç°ä¸èƒ½ä¸Šç½‘. å‘ç°æ˜¯dnsçš„é—®é¢˜.
    ä¸æ€•æŠ˜è…¾çš„æˆ‘æ€ä¹ˆèƒ½å¤Ÿå¿å—æ¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨éƒ½è¦å¸¦ä¸Š--dnså‚æ•°å‘¢ï¼Œä¸€å®šå¯ä»¥æ”¹çš„ã€‚
    ä¿®æ”¹é»˜è®¤dns

    ä¿®æ”¹/etc/default/docker
        DOCKER_NETWORK_OPTIONS="--dns=61.139.2.69"

    ä¿®æ”¹/lib/systemd/system/docker.service
        ...
        [Service]
        EnviornmentFile=-/etc/default/docker
        ExecStart=/usr/bin/docker daemon -H fd:// $OPTIONS \
                  $DOCKER_NETWORK_OPTIONS
        ...

    é‡å¯docker
    systemctl daemon-reload
    systemctl restart docker.service
    #ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹ docker çš„å¯åŠ¨å‘½ä»¤æ˜¯å¦ç”Ÿæ•ˆ
    $ ps -ef | grep docker
    root     ***     1  0 5æœˆ25 ?       00:02:23 /usr/bin/docker daemon -H fd:// --dns=61.139.2.69 --registry-mirror=***


ğŸ”µ å®‰è£… JDK8
    wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u91-b14/jdk-8u91-linux-x64.tar.gz
    sudo mkdir /usr/java
    sudo tar zxf jdk-8u91-linux-x64.tar.gz -C /usr/java
    sudo echo "export JAVA_HOME=/usr/java/jdk1.8.0_91" >> /etc/bashrc
    sudo "export PATH=$PATH:$JAVA_HOME/bin" >> /etc/bashrc
    sudo echo "export CLASSPATH=$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar" >> /etc/bashrc
    source /etc/bashrc





ğŸ”µ å®‰è£…hadoop: 
  wget http://mirrors.cnnic.cn/apache/hadoop/common/hadoop-2.7.2/hadoop-2.7.2.tar.gz
  sudo mkdir /usr/local/hadoop
  sudo tar zxf hadoop-2.7.2.tar.gz -C /usr/local/hadoop
  sudo echo "export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.2" >> /etc/bashrc
  sudo echo "export HADOOP_CONFIG_HOME=$HADOOP_HOME/etc/hadoop" >> /etc/bashrc
  sudo echo "export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin" >> /etc/bashrc
  source /etc/bashrc



ğŸ”µ é…ç½® hadoop

    é…ç½®:  https://github.com/kbyyd24/blog/issues/2





ğŸ”µ å…å¯†ç ç™»å½•

    ssh-keygen -t rsa -P "" -f ~/.ssh/id_rsa
    cd ~/.ssh
    #è·å–å®¿ä¸»æœºçš„å…¬é’¥ï¼Œæ–¹ä¾¿å®¿ä¸»æœºç™»å½•
    scp melo@172.17.0.1:~/.ssh/id_rsa.pub authorized_keys
    cat id_rsa.pub >> authorized_keys
    chmod 600 authorized_keys


    è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå› ä¸ºåé¢è¿è¡Œæ—¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½ä»é•œåƒå¯åŠ¨ï¼Œé‚£éƒ½æ˜¯å…¨æ–°çš„ç¯å¢ƒï¼Œä½¿ç”¨sshç™»å½•æ—¶æ˜¯éœ€è¦ç¡®è®¤çš„ã€‚
    ä¸ºäº†é¿å…ä¸å¿…è¦çš„éº»çƒ¦ï¼Œç‰¹æ„æŸ¥äº†èµ„æ–™ï¼Œæ‰¾åˆ°è§£å†³åŠæ³•ã€‚
    æƒ³è¦è¾¾åˆ°è¿æ¥æ–°ä¸»æœºæ—¶ä¸ç”¨ç¡®è®¤çš„æ•ˆæœï¼Œå°±éœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯çš„sshé…ç½®çš„StrictHostKeyCheckingã€‚è¯¥å‚æ•°é»˜è®¤ä¸ºaskï¼Œä¿®æ”¹ä¸ºno
    Host *
      StrictHostKeyChecking no
    
    http://www.worldhello.net/2010/04/08/1026.html



ğŸ”µ Docker é…ç½®

ğŸ”¸ä¿å­˜Container
docker commit -m "hadoop installed" <container id|container name> centos:hadoop


ğŸ”¸å¯åŠ¨Hadoop

  slaveéœ€è¦çŸ¥é“masteråœ¨å“ªé‡Œï¼Œæ‰èƒ½å‘masterå‘é€å¿ƒè·³å’Œæ•°æ®å—ï¼Œå¦åˆ™masterä¸Šçš„namenodeå°†æ‰¾ä¸åˆ°datanode
  å› ä¸ºå¯¹dockerçš„ç½‘ç»œé…ç½®ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨äº†ä¸€ä¸ªç®€å•çš„åŠæ³•ï¼Œä¿®æ”¹/root/run.sh
  #!/bin/bash
  echo "172.17.0.4    master" >> /etc/network
  /usr/sbin/sshd -D
  å› ä¸ºèŠ‚ç‚¹åªæœ‰3ä¸ªï¼Œæˆ‘ä¹Ÿåªå¼€è¿™ä¸‰ä¸ªå®¹å™¨ï¼Œmasteråˆæ˜¯æœ€åå¯åŠ¨çš„ï¼Œæ‰€æœ‰masterçš„åœ°å€å°±æ˜¯172.17.0.4

  æ‰€ä»¥ä¸Šé¢åˆ›å»ºçš„é•œåƒå·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚





ğŸ”¸å¯åŠ¨å®¹å™¨

    $ docker run -d --name slave1 centos:hadoop /root/run.sh
    $ docker run -d --name slave2 centos:hadoop /root/run.sh
    $ docker run -d --name master -h master -P --link slave1:slave1 --link slave2:slave2 centos:hadoop /root/run.sh

    æˆ‘å°†ä»¥ä¸Šä¸‰ä¸ªå‘½ä»¤å†™åˆ°äº†ä¸€ä¸ªå¯åŠ¨è„šæœ¬é‡Œï¼Œç›´æ¥å°±å¯ä»¥å¯åŠ¨äº†ï¼Œç„¶ååœ¨ç”¨sshç™»å½•åˆ°masterä¸Šå¯åŠ¨hadoop
    å› ä¸ºä½¿ç”¨çš„æ˜¯dockerçš„é»˜è®¤ç½‘ç»œï¼Œæ‰€æœ‰å¯ä»¥ç®—å‡ºmasterçš„IPåœ°å€ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡docker netword inspect bridgeå‘½ä»¤å»è·å–


ğŸ”¸ å¯åŠ¨ Hadoop

  åˆ‡æ¢åˆ°$HADOOP_HOMEç›®å½•ï¼Œé¦–å…ˆæ ¼å¼åŒ–namenode:

  ./bin/hadoop namenode -format

  ç„¶åå°±å¯ä»¥å¯åŠ¨Hadoopäº†

  å°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨ æŸ¥çœ‹web ç®¡ç†æ¥å£!!

  è¯¦ç»†æ–‡ç« : https://github.com/kbyyd24/blog/issues/2











    NTPæ—¶é—´åŒæ­¥

        é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºå¿…é¡»ä¿æŒæ—¶é—´åŒæ­¥ï¼Œå¦‚æœæ—¶é—´ç›¸å·®è¾ƒå¤§ä¼šå¼•èµ·å„ç§é—®é¢˜ã€‚
        å…·ä½“æ€è·¯å¦‚ä¸‹ï¼šmasterèŠ‚ç‚¹ä½œä¸ºntpæœåŠ¡å™¨ï¼Œå¯¹æ‰€æœ‰datanodeèŠ‚ç‚¹æä¾›æ—¶é—´åŒæ­¥æœåŠ¡ã€‚
        æ‰€æœ‰datanodeèŠ‚ç‚¹ä»¥masterèŠ‚ç‚¹ä¸ºåŸºç¡€åŒæ­¥æ—¶é—´
        æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ç›¸å…³ç»„ä»¶ï¼šyum install ntpã€‚
        å®Œæˆåï¼Œé…ç½®å¼€æœºå¯åŠ¨ï¼šchkconfig ntpd on,
        æ£€æŸ¥æ˜¯å¦è®¾ç½®æˆåŠŸï¼šchkconfig --list ntpdå…¶ä¸­2-5ä¸ºonçŠ¶æ€å°±ä»£è¡¨æˆåŠŸ

