ğŸ”µ Nginx å®‰è£…
        LNMP ç¯å¢ƒå®‰è£…å¥½. 
        æµè§ˆå™¨åœ°å€æ å°±å¯ä»¥é€šè¿‡ IPåœ°å€ æ¥è®¿é—®æœåŠ¡å™¨é»˜è®¤ç½‘é¡µäº†!!
        è¿™ä¸ªé»˜è®¤é¡µé¢ æœ‰é“¾æ¥  å¯ä»¥ç”¨ myphpadmin ç›´æ¥è¿åˆ°æ•°æ®åº“.
        è¿™ä¸ªé»˜è®¤ç½‘é¡µåœ¨æœåŠ¡å™¨çš„ /home/wwwroot/default/index.html
        /home/wwwroot/default/ è¿™ä¸ªå°±æ˜¯ç½‘ç«™çš„æ ¹ç›®å½•!!!!

        ä¸‹é¢æˆ‘ä»¬æ¥æ­å»º ss-panel.
        ç»ˆç«¯è¿›å…¥åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸‹é¢å‘½ä»¤
        ğŸ”… git clone https://github.com/monokoo/ss-panel.git
        è¿™ä¸ªæ˜¯ä¸‹è½½æ–‡ä»¶
        ğŸ”… mv ss-panel/.git . && rm -rf ss-panel && git reset --hard
        è¿™ä¸ªæ˜¯è§£å‹æ–‡ä»¶.

        ğŸ”… curl -sS https://getcomposer.org/installer | php
        å¥½åƒä¹Ÿæ˜¯ä¸‹è½½æ–‡ä»¶
        ğŸ”… php composer.phar  install
        å®‰è£…æ–‡ä»¶...
        è¿™é‡Œ phpç»„ä»¶ éœ€è¦ phpç‰ˆæœ¬ >5.6  ä¸ç„¶æŠ¥é”™.

        ç„¶å æŠŠ.env.example æ–‡ä»¶åé‡å‘½åæˆ .env
        ğŸ”… cp .env.example .env

        ä¿®æ”¹æƒé™
        ğŸ”… chmod -R 777 storage


        ç„¶åå°±å¯ä»¥å¯¼å…¥sqlæ–‡ä»¶å¤¹é‡Œé¢çš„ æ–‡ä»¶äº†.
        æœ€åå°±æ˜¯è¿›ç¨‹ nginx çš„é…ç½®äº†..




ç»‘å®šåŸŸå:
1. é¦–å…ˆåŸŸåæä¾›å•†é‡Œ 
æ·»åŠ ä¸ªaè®°å½•. æŠŠåŸŸåæŒ‡å‘ip.
è¿™æ­¥å®Œæˆå è¿™æ—¶å€™ è¾“å…¥åŸŸåæ˜¯ä¸èƒ½è®¿é—®æœåŠ¡å™¨ä¸Šç½‘ç«™çš„.
æœåŠ¡å™¨ä¸Šä¹Ÿå¿…é¡»è®¾ç½®è¿‡ æ‰èƒ½ å®ç°ç”¨ç½‘å€è®¿é—®IP.


å…ˆè¿›è¡ŒåŸŸåè§£æ:








â¤ï¸â¤ï¸ nginx æ“ä½œå‘½ä»¤

âœ”ï¸ æŸ¥çœ‹ç‰ˆæœ¬:    nginx -v

âœ”ï¸ å®‰è£…Nginx    åŒ…ç®¡ç†å™¨å®‰è£… / æºç ç¼–è¯‘å®‰è£….


  ğŸ“ŒåŒ…ç®¡ç†å™¨å®‰è£…æ–¹å¼1: CentOS äº²æµ‹å¯ç”¨
    å®˜æ–¹çš„æºä¸­ä¸åŒ…å«nginx,è¦å…ˆä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªrpmåŒ…,
    è¿™ä¸ªåŒ…ä¼šç»™yumæ·»åŠ ä¸€ä¸ªæº.ä¹‹åå°±èƒ½ç”¨ yum å®‰è£… ngixnäº†

    1. ä¸‹è½½å¯¹åº”çš„rpmåŒ…
    wget http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm

    2. å®‰è£…è¿™ä¸ªrpmåŒ…
    rpm -ivh nginx-release-centos-6-0.el6.ngx.noarch.rpm 

    3. å®‰è£…nginx  
    yum install nginx



  ğŸ“ŒåŒ…ç®¡ç†å™¨å®‰è£…æ–¹å¼2: 
        https://gist.github.com/ifels/c8cfdfe249e27ffa9ba1


  ğŸ“Œç¼–è¯‘å®‰è£…:
        1 wget http://nginx.org/download/nginx-1.4.2.tar.gz 
        2 tar -zxvf nginx-1.4.2.tar.gz
        3 mv nginx-1.4.2 nginx
        4 cd nginx
        5 ./configure --prefix=/usr/local/nginx # ç¼–è¯‘é€‰é¡¹é…ç½®ï¼Œè¿™é‡Œä»ç®€
        6 make && make install # ç¼–è¯‘å®‰è£…
        7 ln -s /usr/local/nginx/sbin/nginx /usr/sbin/nginx



ğŸ“Œ Nginx å¸¸ç”¨æ“ä½œ
Usage: nginx {start|stop|restart|condrestart|try-restart|force-reload|upgrade|
reload|status|help|configtest|check-reload}

    /etc/init.d/nginx start      # å¯åŠ¨NginxæœåŠ¡
    /etc/init.d/nginx stop       # åœæ­¢NginxæœåŠ¡
    /etc/init.d/nginx force-quit # å¼ºåˆ¶é€€å‡º NginxæœåŠ¡
    /etc/init.d/nginx status     # æŸ¥çœ‹NginxæœåŠ¡çŠ¶æ€

    /etc/nginx/nginx.conf        # Nginxé…ç½®æ–‡ä»¶ä½ç½®
    chkconfig nginx on           # è®¾ä¸ºå¼€æœºå¯åŠ¨
    å¯åŠ¨å å°±èƒ½è®¿é—® Nginx çš„æ¬¢è¿é¡µé¢äº†.
    å¦‚æœä¸å‡ºç°è¿™ä¸ªé¡µé¢. éœ€è¦é‡è£…. æˆ–è€…æ˜¯é˜²ç«å¢™é—®é¢˜.




ğŸ“Œ æŸ¥çœ‹è¿›ç¨‹
    ps -ef|grep nginx 


ğŸ“Œ å¸è½½ Nginx

    1. å…ˆåœæ­¢æœåŠ¡.
        service nginx stop
    2. ç§»é™¤è‡ªåŠ¨å¯åŠ¨é¡¹
        chkconfig nginx off
    3. ç„¶ååˆ é™¤æ–‡ä»¶å¤¹...
        rm -rf /etc/nginx
        rm -rf /etc/init.d/nginx


      å¦‚æœä½ æ˜¯ç”¨ yum å®‰è£…çš„ é‚£å°±å¯ä»¥ç”¨ yumæ¥å¸è½½.
      å¦‚æœä½ ä¸æ˜¯ç”¨ yumå®‰è£…çš„ é‚£å°±ç”¨å…¶ä»–åŠæ³•æ¥å¸è½½.

















âœ”ï¸ æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯:
    [root@localhost default]# nginx -V
    nginx version: nginx/1.10.0
    built by gcc 4.4.7 20120313 (Red Hat 4.4.7-17) (GCC)
    built with OpenSSL 1.0.1e-fips 11 Feb 2013
    TLS SNI support enabled
    configure arguments: --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module
    --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_s
    ub_module

âœ”ï¸ nginx å¯åŠ¨:      /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
âœ”ï¸ å¼€å¯nginxæœåŠ¡å™¨  sudo service nginx start


âœ”ï¸ æŸ¥çœ‹è¿›ç¨‹:      ps -ef |grep nginx
  [root@localhost default]# ps -ef |grep nginx
  root     22559     1  0 09:21 ?        00:00:00 nginx: master process /usr/local/nginx/sbin/nginx -c
  /usr/local/nginx/conf/nginx.conf
  www      22560 22559  0 09:21 ?        00:00:00 nginx: worker process
  root     23283 12694  0 10:34 pts/2    00:00:00 grep nginx


âœ”ï¸ é‡å¯nginx
  /usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf
  å…¶ä¸­ -t è¡¨ç¤ºæµ‹è¯•ï¼Œå¹¶ä¸çœŸæ­£æ‰§è¡Œã€‚ 

  ç„¶åï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡åŠ è½½Nginxé…ç½®ï¼š
  kill -HUP masterè¿›ç¨‹å·


Nginxæ”¯æŒä»¥ä¸‹å‡ ç§ä¿¡å·æ§åˆ¶ï¼š
  TERM, INT å¿«é€Ÿå…³é—­
  QUIT ä»å®¹å…³é—­
  HUP å¹³æ»‘é‡å¯
  USR1 é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œåœ¨åˆ‡å‰²æ–‡ä»¶æ—¶ç”¨å¤„å¤§
  USR2 å¹³æ»‘å‡çº§
  WINCH ä»å®¹å…³é—­å·¥ä½œè¿›ç¨‹
  æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿¡å·åœæ­¢Nginxä¸»è¿›ç¨‹ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ ps -ef | grep å‘½ä»¤è·å¾—masterè¿›ç¨‹çš„PIDï¼Œæˆ–è€…é€šè¿‡cat pidæ–‡ä»¶è·å¾—ä¸»è¿›ç¨‹å·ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªå…¸å‹çš„åœæ­¢è¯­å¥ï¼š


  #ä»å®¹åœæ­¢Nginx  
  kill -QUIT masterè¿›ç¨‹å·  
  #å¿«é€Ÿåœæ­¢Nginx  
  kill -TERM masterè¿›ç¨‹å·  
  #å¼ºåˆ¶åœæ­¢Nginx  
  kill -9 masterè¿›ç¨‹å·







â¤ï¸ Nginx é…ç½®

ğŸ“Œ ä¸€èˆ¬å®‰è£…åœ¨ /usr/local/nginx ä¸‹é¢.





å¯åŠ¨ $ /usr/local/nginx/sbin/nginx
        æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š
        æ‰“å¼€æµè§ˆå™¨è®¿é—®æ­¤æœºå™¨çš„ IPï¼Œå¦‚æœæµè§ˆå™¨å‡ºç° Welcome to nginx! åˆ™è¡¨ç¤º Nginx å·²ç»å®‰è£…å¹¶è¿è¡ŒæˆåŠŸã€‚

é‡å¯ï¼š  $ /usr/local/nginx/sbin/nginx â€“s reload
âœ”ï¸ åœæ­¢ï¼š $ /usr/local/nginx/sbin/nginx â€“s stop
æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£å¸¸ï¼š  $ /usr/local/nginx/sbin/nginx â€“t

å¼ºåˆ¶å…³é—­ï¼š$ pkill nginx


ğŸ”µ é…ç½®æ–‡ä»¶:    /usr/local/nginx/conf/nginx.conf

Nginxé…ç½®æ–‡ä»¶å¸¸è§ç»“æ„çš„ä»å¤–åˆ°å†…ä¾æ¬¡æ˜¯ã€Œhttpã€ã€Œserverã€ã€Œlocationã€ç­‰ç­‰ï¼Œ
ç¼ºçœçš„ç»§æ‰¿å…³ç³»æ˜¯ä»å¤–åˆ°å†…ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å±‚å—ä¼šè‡ªåŠ¨è·å–å¤–å±‚å—çš„å€¼ä½œä¸ºç¼ºçœå€¼ã€‚

Server

æ¥æ”¶è¯·æ±‚çš„æœåŠ¡å™¨éœ€è¦å°†ä¸åŒçš„è¯·æ±‚æŒ‰è§„åˆ™è½¬å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ä¸Šï¼Œåœ¨ nginx ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„å»ºè™šæ‹Ÿä¸»æœºï¼ˆserverï¼‰çš„æ¦‚å¿µæ¥å°†è¿™äº›ä¸åŒçš„æœåŠ¡é…ç½®éš”ç¦»ã€‚

server {
    listen       80;
    server_name  localhost;
    root   html;
    index  index.html index.htm;
}

è¿™é‡Œçš„ listen æŒ‡ç›‘å¬ç«¯å£ï¼Œ
server_name ç”¨æ¥æŒ‡å®šIPæˆ–åŸŸåï¼Œå¤šä¸ªåŸŸåå¯¹åº”ç»Ÿä¸€è§„åˆ™å¯ä»¥ç©ºæ ¼åˆ†å¼€ï¼Œ
index ç”¨äºè®¾å®šè®¿é—®çš„é»˜è®¤é¦–é¡µåœ°å€ï¼Œ
root æŒ‡ä»¤ç”¨äºæŒ‡å®šè™šæ‹Ÿä¸»æœºçš„ç½‘é¡µè·Ÿç›®å½•ï¼Œè¿™ä¸ªåœ°æ–¹å¯ä»¥æ˜¯ç›¸å¯¹åœ°å€ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹åœ°å€ã€‚












server {  
    listen 80;
    server_name example.com;
    root /var/www/ss-panel/public/;
    index index.php index.html index.htm;
    location / {
        try_files $uri $uri/ /index.php$is_args$args;
    }
    location ~ \.php$ {
        try_files $uri =404;
                fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
                fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                include fastcgi_params;
    }
}

å½“ç„¶è¿™æ˜¯å…¸å‹é…ç½®ï¼Œè®°å¾—æŠŠ example.com æ¢æˆä½ è‡ªå·±çš„ç½‘å€ã€‚



http://23.105.192.96/index.php

The 23.105.192.96 page isnâ€™t working

23.105.192.96 is currently unable to handle this request.
HTTP ERROR 500

500 è¯´æ˜æ˜¯æœåŠ¡å™¨é—®é¢˜. 
æœåŠ¡å™¨æ˜¯ nginx  æ²¡å¯åŠ¨è¿˜æ˜¯...






â¤ï¸ ç½‘ç«™é…ç½®  Nginx

ğŸ“Œ ä¸€é”®è„šæœ¬å®‰è£…å¥½å:  åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿä¸»æœº:
    lnmp vhost add

    ä¸€æ­¥æ­¥... æœ€åä¼šé—®ä½ æ˜¯å¦è¦å®‰è£…æ•°æ®åº“.è¿™é‡Œé€‰å¦ ssçš„æ•°æ®åº“æˆ‘ä»¬è‡ªå·±å®‰è£….

    Restart Nginx......
    ================================================
    Virtualhost infomation:
    Your domain: www.0214.help
    Home Directory: /home/wwwroot/www.0214.help
    Rewrite: other
    Enable log: yes
    Create database: no
    Create ftp account: no
    ================================================


ğŸ“Œ ä¸‹è½½ ss-panel




ğŸ“Œ Nginx ç½‘ç«™æ ¹ç›®å½•:
    ä¸€é”®è„šæœ¬ç¯å¢ƒå®‰è£…å¥½çš„æœ€åæœ‰æç¤ºçš„. ä¸‹é¢è¿™è¡Œå°±æ˜¯ç½‘ç«™æ ¹ç›®å½•.    
    Default directory: /home/wwwroot/default


ğŸ“Œ Nginx é…ç½®æ–‡ä»¶:
  /usr/local/nginx/conf/vhost/ss.panel.conf



ä¿®æ”¹å®Œäº†ä¹‹åï¼Œåˆ°ç½‘ç«™ç›®å½•ä¸‹è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚
[root@vultr vhost]# cd /home/wwwroot/ss.panel/
[root@vultr ss.panel]# chattr -i .user.ini
[root@vultr ss.panel]# mv .user.ini public
[root@vultr ss.panel]# cd public








ss-panel åº”è¯¥å…ˆä¸‹è½½ è§£å‹å‡ºæ¥. è§£å‹åçš„ä¸€å¤§å †æ–‡ä»¶å¤¹ éƒ½æ”¾åœ¨ wwwroot ä¸‹é¢








å¸è½½ é‡è£… nginx

yum install
yum remove



è™šæ‹Ÿä¸»æœºæœ‰å¾ˆå¤šç±»å‹. åŸºäºIP/åŸºäºåŸŸå/åŸºäºç«¯å£.
ä¸€èˆ¬ä¸€ä¸ªæœåŠ¡å™¨ä¹Ÿå°±ä¸€ä¸ªiPå’Œä¸€ä¸ªåŸŸå. æ‰€ä»¥åŸºäºç«¯å£çš„è™šæ‹Ÿä¸»æœºæœ€å¸¸è§.

é…ç½®ç®€å•..  ä¸€ä¸ªç½‘ç«™,ä¸€ä¸ªç«¯å£,ä¸€ä¸ª server,ä¸€ä¸ªæ ¹ç›®å½•.
åŸºäºç«¯å£çš„è¯. æœåŠ¡å™¨ä¸Šè™šæ‹Ÿä¸»æœºåªéœ€è¦åˆ›å»ºä¸€ä¸ª!!!
è¦æ·»åŠ ç«¯å£ .å»é…ç½®æ–‡ä»¶ä¸­ æ·»åŠ  serverå°±å¯ä»¥äº†.







â¤ï¸ nginx.conf é…ç½®æ–‡ä»¶è¯¦è§£.
å…¶å®å¾ˆç®€å•!  
nginxé…ç½®æ–‡ä»¶ä¸»è¦åˆ†ä¸ºå…­ä¸ªåŒºåŸŸï¼š 
main(å…¨å±€è®¾ç½®)ã€events(nginxå·¥ä½œæ¨¡å¼)ã€http(httpè®¾ç½®)ã€ 
sever(ä¸»æœºè®¾ç½®)ã€location(URLåŒ¹é…)ã€upstream(è´Ÿè½½å‡è¡¡æœåŠ¡å™¨è®¾ç½®)ã€‚


main

events {                       âœ  nginx å·¥ä½œæ¨¡å¼
    use kqueue;                âœ å¯é€‰å€¼: select/kqueue/qpoll .macå¹³å°ç”¨kqueue
    worker_connections  1024;  âœ æ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°. ä¹Ÿå°±æ˜¯å‰ç«¯æœ€å¤§è¯·æ±‚æ•°é‡.
   }


http {   httpæœåŠ¡å™¨ç›¸å…³è®¾ç½®. æœ€ä¸»è¦å°±æ˜¯ serverã€upstream ä¸¤ä¸ªæ¨¡å—
    ....


    upstream iyangyi.com {   æŒ‡å®šäº†ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨çš„åç§°iyangyi.com
    
     ip_hash;   âœ ä¸€ç§è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•: æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®IPçš„hashç»“æœåˆ†é…ï¼Œ
                âœ è¿™æ ·æ¥è‡ªåŒä¸€ä¸ªIPçš„è®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œ
                âœ æœ‰æ•ˆè§£å†³äº†åŠ¨æ€ç½‘é¡µå­˜åœ¨çš„sessionå…±äº«é—®é¢˜ã€‚

    server 192.168.12.1:80;           âœ serveræŒ‡ä»¤æŒ‡å®šåç«¯æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£ï¼Œ
    server 192.168.12.4:8080;   
    server 192.168.12.2:80 down;    â€  âœ  å½“å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡ã€‚
    server 192.168.12.3:8080  max_fails=3  fail_timeout=20s;
                                      âœ max_failsï¼Œ   å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1ã€‚
                                      âœ fail_timeoutï¼Œmax_failså¤±è´¥åï¼Œæš‚åœæœåŠ¡çš„æ—¶é—´. 
    server 192.168.12.5:8080 backup;  âœ å¤‡ä»½æœåŠ¡å™¨,å…¶ä»–æœºå™¨å‡ºç°æ•…éšœ/å¿™æ—¶å¯ç”¨.


    
    }

    server  {  httpçš„å­æ¨¡å—.é‡Œé¢è¿˜æœ‰ä¸ªlocationæ¨¡å—. æ¯ä¸ªserverå¯ä»¥æŒ‡å®šä¸€ä¸ªè™šæ‹Ÿä¸»æœº.

                listen       8080;         âœ  æŒ‡å®šè¿™ä¸ªè™šæ‹Ÿä¸»æœºçš„ç«¯å£.
                server_name  localhost 192.168.12.10 www.yangyi.com;
                                        âœ  æŒ‡å®šè¯¥è™šæ‹Ÿä¸»æœºçš„IP/åŸŸå. å¤šåŸŸåç”¨ç©ºæ ¼åˆ†å¼€
                root   /Users/yangyi/www;  âœ è¿™ä¸ªè™šæ‹Ÿä¸»æœºçš„ç½‘ç«™æ ¹ç›®å½•.
                index  index.php index.html index.htm;                âœ è®¾ç½®é»˜è®¤é¦–é¡µåœ°å€!
                charset utf-8;                                        âœ è®¾ç½®ç½‘é¡µç¼–ç æ ¼å¼.
                access_log  usr/local/var/log/host.access.log  main;  âœ æ—¥å¿—è·¯å¾„
                aerror_log  usr/local/var/log/host.error.log  error;  âœ æ—¥å¿—è·¯å¾„
                ....


                location / {                 âœ æœ€ä¸»è¦æ¨¡å—:è´Ÿè½½å‡è¡¡ã€åå‘ä»£ç†ã€è™šæ‹ŸåŸŸå.. 
                                             âœ è¿™ä¸ªæ¨¡å—ç”¨å®šä½URL.è§£æURL(æ”¯æŒæ­£åˆ™åŒ¹é…)
                                             âœ / çš„æ„æ€å°±æ˜¯åŒ¹é…è®¿é—®æ ¹ç›®å½•.
                                             âœ å¼€å¯æ­£åˆ™å¼åŒ¹é…(åŠ ~):location ~ \.php$ 
                    root   /Users/yangyi/www;      âœ æŒ‡å®šè¯¥è™šæ‹Ÿä¸»æœºçš„webç›®å½•.
                    index  index.php index.html;   âœ æŒ‡å®šé»˜è®¤é¦–é¡µ
                

                }




            }




    server  {  ä¸»æœº2 è®¾ç½®
                location {  URL åŒ¹é…    }
            }
    server  {  ä¸»æœº3 è®¾ç½®
                location {  URL åŒ¹é…    }
            }            
    ....
}

