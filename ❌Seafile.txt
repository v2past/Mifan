ä¸æ¨èæŠ˜è…¾è¿™è´§... å°è¯•äº†å¥½å¤šæ¬¡éƒ½æ²¡å®‰è£…æˆåŠŸ.. æ²¡å¿…è¦èŠ±ç²¾åŠ›..


â¤ï¸ï¸ ç®€ä»‹
    ä¼ä¸šäº‘ç›˜, å®˜ç½‘ï¼šhttps://www.seafile.com/download/

    ğŸ”¸å‡†å¤‡å·¥ä½œ:
        å®‰è£…å¥½LNMPç¯å¢ƒå°±æ­å»ºå¥½ mysqlæ•°æ®åº“.å’Œ nginxäº†. è¯¦æƒ…å‚è€ƒ:vps.txt
        Python å‡çº§:  å‚è€ƒ Python-update.txt

        éœ€è¦ç”¨åˆ°æ•°æ®åº“:  ä¸ªäººå»ºè®®ç”¨ SQLiteã€ä¼ä¸šå»ºè®®ç”¨ MySQL 
        éœ€è¦WebæœåŠ¡å™¨:   Nginx æˆ–è€… Apache 
        python 2.7+


ğŸ”µ ä¸‹è½½
ä¸‹è½½ seafile-server åˆ°/rootç›®å½•.
wget http://seafile-downloads.oss-cn-shanghai.aliyuncs.com/seafile-server_6.0.9_i386.tar.gz

mkdir seafile                               ğŸ”… rootç›®å½•ä¸‹æ–°å»ºä¸ªseafileæ–‡ä»¶å¤¹
mv seafile-server_* seafile                 ğŸ”… ç§»åŠ¨å‹ç¼©åŒ…åˆ° seafile æ–‡ä»¶å¤¹ä¸­; æ˜Ÿå·:åŒ¹é….
cd seafile && tar -xzf seafile-server_*     ğŸ”… cdåˆ° seafile å¹¶è§£å‹æ–‡ä»¶
cd seafile-server-6.0.9 

ğŸ”µ å®‰è£…
è¿™é‡Œå°±æœ‰é€‰æ‹©äº†
./setup-seafile.sh           ç”¨sqlite3 æ¥å½“æ•°æ®åº“ ç„¶åå¼€å§‹å®‰è£… seafile æœåŠ¡å™¨.
./setup-seafile-mysql.sh     ç”¨mysql   æ¥å½“æ•°æ®åº“ ç„¶åå¼€å§‹å®‰è£… seafile æœåŠ¡å™¨.

æˆ‘ä»¬é€‰æ‹©mysql.è¿™é‡Œå®‰è£…è¿‡ç¨‹é¦–å…ˆä¼šæ£€æŸ¥ä¸€äº›ä¾èµ–.æ²¡æœ‰çš„è‡ªå·±å®‰è£…!!!


        ğŸ‘¹ python-imaging  is not installed, Please install it first.
            å®‰è£… Python Imaging :
            æœ‰ä¸ªpythonçš„æˆ‘ä»¬éƒ½ç”¨ pipæ¥å®‰è£… æ–¹ä¾¿å¾ˆå¤š.
            å›¾å‹å¤„ç†åº“Python Imaging Library(PIL)
            ç”±äºPILåŸºæœ¬æŒ‚äº†. æˆ‘ä»¬ç”¨ pillow æ¥ä»£æ›¿.
            ğŸ”… pip install Pillow
        
            æˆ–è€…ä½ å¯ä»¥ç°åœ¨æ‰‹åŠ¨ä¸‹è½½ç¼–è¯‘ Python Imagin
                wget http://effbot.org/downloads/Imaging-1.1.7.tar.gz

                tar xvf Imaging-1.1.7.tar.gz
                cd Imaging-1.1.7
                python setup.py install

        ğŸ‘¹ python-mysqldb  is not installed, Please install it first.   
            å®‰è£… MySQL-python
            seafile éœ€è¦ç”¨åˆ°æ•°æ®åº“.
            ä½ å¯ä»¥é€‰æ‹©ç”¨ sqliteæ•°æ®åº“. ä¹Ÿå¯ä»¥é€‰æ‹©ç”¨ mysqlæ•°æ®åº“.
            è¿˜æ˜¯mysqlå§.   
            seafile å®‰è£…ç¨‹åºå°±æ˜¯ç”¨ pythonå†™çš„.
            python è¦æ“ä½œmysql å°±å¾—å®‰è£… mysqldb è¿™ä¸ªä¸œè¥¿. é€šè¿‡è¿™ä¸ªæ‰èƒ½æ“ä½œmysqlæ•°æ®åº“.
            â—â—ï¸â—ï¸è¦ç”¨pipå®‰è£… MySQL-python. å¿…é¡»å…ˆå®‰è£… python-develã€mysql-devel

            yum install python-devel
            yum install mysql-devel
            pip install MySQL-python






ğŸ”¸å®‰è£…seafileä¸»ç¨‹åº
    ./setup-seafile-mysql.sh 

    1. è¾“å…¥ server name   
    2. æœåŠ¡å™¨IP/åŸŸå       
    3. æ–‡ä»¶å­˜æ”¾è·¯å¾„:       
    4. é€‰æ‹©ç«¯å£:           
    5. æ•°æ®åº“.             
    6. æ•°æ®åº“æœåŠ¡å™¨åœ°å€.     
    7. æ•°æ®åº“ç«¯å£.            
    8. root çš„å¯†ç .... 
    9. åˆ›å»ºç”¨æˆ·å:              
    10 ç»™ seafile ç”¨æˆ·åˆ›å»ºå¯†ç :  
    11 åˆ›å»ºccnetserverd æ•°æ®åº“å:
    12 åˆ›å»ºseafile-server æ•°æ®åº“å: 
    13 åˆ›å»ºseahub çš„æ•°æ®åº“å: 

    ---------------------------------
    This is your configuration
    ---------------------------------

        server name:            xujian
        server ip/domain:       www.0214.help

        seafile data dir:       /root/seafile/seafile-data
        fileserver port:        8082

        database:               create new
        ccnet database:         ccnet-db
        seafile database:       seafile-db
        seahub database:        seahub-db
        database user:          seafile



            ğŸ‘¹ Error: Failed to init seahub database: Specified key was too long; max key length is 1000 bytes

            å¦‚æœé‡åˆ°è¿™ä¸ªæŠ¥é”™ å°±è¯´æ˜ç´¢å¼•å¤ªé•¿äº†. é»˜è®¤æœ€é•¿å€¼ 1000bytes.
            å…¶å®æ˜¯æ•°æ®åº“å¼•æ“çš„é—®é¢˜.
            MyISAMæ˜¯MySQL5.5ä¹‹å‰ç‰ˆæœ¬é»˜è®¤çš„æ•°æ®åº“å­˜å‚¨å¼•æ“.
            InnoDBæ˜¯MySQL5.6ç‰ˆæœ¬çš„é»˜è®¤æ•°æ®åº“å­˜å‚¨å¼•æ“ï¼Œ
            ä¸€èˆ¬æ¥è¯´ mysql 5.5 ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜. å› ä¸ºmysql 5.5 é»˜è®¤ä½¿ç”¨ MyISAMå¼•æ“, 
            å»ºè®®æ¢innodbå¼•æ“,Innodb å¼•æ“æ€§èƒ½å¥½å¾ˆå¤š.. å¾ˆå¤šè½¯ä»¶å¿…é¡»ç”¨ innodb å¼•æ“ä¸ç„¶å°±æŠ¥é”™.
            æ¢å¼•æ“ä¸¤ç§æ–¹æ³•. è¦ä¹ˆå‡çº§mysqlç‰ˆæœ¬. è¦ä¹ˆä¿®æ”¹ä¸‹å¯ç”¨ mysql5.5 çš„innodbå¼•æ“.

            ğŸ“ŒğŸ“Œ æœ€ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯å¤‡ä»½5.5 çš„æ•°æ®åº“. ç„¶åå‡çº§éƒ½5.6/5.7 ç„¶åå†æ•°æ®æ¢å¤.
            å¦‚æœä½ çš„æœåŠ¡å™¨ å†…å­˜å°äº1G... é‚£æ˜¯æ²¡åŠæ³•å®‰è£… mysql 5.6+ ç‰ˆæœ¬çš„....
            é‚£å°±åªèƒ½ åœ¨mysql 5.5 ä¸Šé¢æƒ³åŠæ³•äº†... 
            ä¸‹é¢æ˜¯è®© mysql5.5 æ”¯æŒ innodbçš„å¤„ç†åŠæ³•
            
            é¦–å…ˆç™»å½• myslq å‘½ä»¤è¡Œäº¤äº’ç•Œé¢.
            ğŸ”… show engines;        âœ  æŸ¥çœ‹å½“å‰æ”¯æŒçš„å¼•æ“. innodbåé¢æ˜¯ no.. è¯´æ˜é»˜è®¤ä¸æ”¯æŒ.éœ€è¦é…ç½®my.cnf  
            ğŸ”… service mysql stop   âœ  é¦–å…ˆå…³é—­mysqlæœåŠ¡.
            ğŸ”… vi /etc/my.cnf       âœ  ä¿®æ”¹my.cnf æ–‡ä»¶
                ğŸ”¸è¿™è¡Œæ³¨é‡Šæ‰: default-storage-engine=MyISAM     
                ğŸ”¸æ·»åŠ è¿™ä¸€è¡Œ: default-storage-engine=INNODB    

                ğŸ”¸ä¸‹é¢å‡ è¡Œå‰é¢çš„æ³¨é‡Šå…¨éƒ¨å»æ‰:
                    innodb_data_home_dir = /usr/local/mysql/var
                    innodb_data_file_path = ibdata1:10M:autoextend
                    innodb_log_group_home_dir = /usr/local/mysql/var
                    innodb_buffer_pool_size = 16M
                    innodb_additional_mem_pool_size = 2M
                    innodb_log_file_size = 5M
                    innodb_log_buffer_size = 8M
                    innodb_flush_log_at_trx_commit = 1
                    innodb_lock_wait_timeout = 50

            ğŸ”… service mysql start âœ  é‡å¯æœåŠ¡   



ğŸ”µ å®‰è£…å®Œæˆ
    å‡ºç°ä¸‹é¢çš„å°±è¯´æ˜å®‰è£…å®Œæˆäº†!!!
    -----------------------------------------------------------------
    Your seafile server configuration has been finished successfully.
    -----------------------------------------------------------------

    run seafile server:     ./seafile.sh { start | stop | restart }
    run seahub  server:     ./seahub.sh  { start <port> | stop | restart <port> }

    -----------------------------------------------------------------
    If you are behind a firewall, remember to allow input/output of these tcp ports:
    -----------------------------------------------------------------

    port of seafile fileserver:   8082
    port of seahub:               8000



â—ï¸â—ï¸â—ï¸â—ï¸å®‰è£…å®Œæˆè¿˜æ²¡ç»“æŸ,ç°åœ¨seafileæ˜¯å¯ä»¥å¯åŠ¨äº†.ä½†æ˜¯seahubå¿…é¡»å…ˆé…ç½®è¿‡æ‰èƒ½å¯åŠ¨â—ï¸â—ï¸â—ï¸â—ï¸
     ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ï¸â—ï¸ï¸â—ï¸â—ï¸â—ï¸seafile æ˜¯ä¸»è¦æœåŠ¡. seahubæ˜¯seafileçš„ç½‘ç«™ç•Œé¢!!â—ï¸â—ï¸â—ï¸â—ï¸
è¿™é‡ŒæŒ‰ç†è¯´åº”è¯¥å¯ä»¥ç”¨ ip:8000 è®¿é—®ç½‘é¡µäº†...
ip:8082 æ˜¯è¦é¢å¤–é…ç½®çš„..  æ˜¾ç¤ºæˆ‘æ˜¯ä¸€ä¸ªéƒ½è®¿é—®ä¸äº†å•Š..



ğŸ”µ å¸¸ç”¨æ“ä½œ

    ./seafile.sh start            # å¯åŠ¨ seafile æœåŠ¡  é»˜è®¤ç›‘å¬8082ç«¯å£.
    ./seahub.sh start             # å¯åŠ¨ seahub ç½‘ç«™   é»˜è®¤ç›‘å¬8000ç«¯å£. 
    pgrep -f seafile-controller   # æŸ¥çœ‹ Seafile è¿›ç¨‹
    pgrep -f "seahub"             # æŸ¥çœ‹ Seahub è¿›ç¨‹
    pkill -f seafile-controller   # ç»“æŸ Seafile è¿›ç¨‹
    pkill -f "seahub"             # ç»“æŸ Seafile è¿›ç¨‹




ğŸ”µ éƒ¨ç½² seahub
è¿™æ˜¯ä¸€ä¸ªç½‘ç«™. æ‰€ä»¥éœ€è¦webæœåŠ¡å™¨. çœ‹ä½ ç”¨ apache è¿˜æ˜¯nginxäº†.

fastcgi  æ˜¯ä¸€ç§è®©äº¤äº’ç¨‹åºä¸WebæœåŠ¡å™¨é€šä¿¡çš„åè®®ã€‚apacheè‡ªå¸¦çš„..
è¿™é‡Œæˆ‘ä»¬é€šè¿‡ fastcgi éƒ¨ç½² Seahub, 
é€šè¿‡åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰éƒ¨ç½² FileServer.  å¥½å¥½çš„ç½‘ç«™å¹²å˜›åå‘ä»£ç†å•Š!!


ä¿®æ”¹ä¸‹  SERVICE_URL å’Œ FILE_SERVER_ROOT å°±å¯ä»¥äº† ..
SERVICE_URL: http://www.myseafile.com
FILE_SERVER_ROOT: http://www.myseafile.com/seafhttp



ğŸ”¸nginx























