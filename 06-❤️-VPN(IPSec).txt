IPSec VPN å®‰è£…
    è¯¦æƒ…å‚è€ƒæµç¨‹:   https://doub.io/vpnzy-3/

ğŸ”µ ä¸€é”®è„šæœ¬å®‰è£…:

    wget --no-check-certificate https://raw.githubusercontent.com/quericy/one-key-ikev2-vpn/master/one-key-ikev2.sh
    chmod +x one-key-ikev2.sh
    bash one-key-ikev2.sh

ğŸ”µ å®‰è£…è¿‡ç¨‹:

  é€‰æ‹©vpsç±»å‹ï¼ˆOpenVZè¿˜æ˜¯Xenã€KVMï¼‰ï¼Œé€‰é”™å°†æ— æ³•æˆåŠŸè¿æ¥ï¼Œè¯·åŠ¡å¿…æ ¸å®æœåŠ¡å™¨çš„ç±»å‹ã€‚
  è¿™é‡Œå¿…é¡»é€‰æ‹©å¯¹. æˆ‘æ˜¯ openvz  ä¹Ÿå°±æ˜¯è¾“å…¥2 ç„¶åä¸€è·¯å›è½¦.


ğŸ”µ å®‰è£…ç»“æœ 

    # [Install Complete]
    # Version:1.2.0
    # There is the default login info of your IPSec/IkeV2 VPN Service
    # UserName: myUserName
    # PassWord: myUserPass
    # PSK: myPSKkey
    # you should change default username and password in /usr/local/etc/ipsec.secrets
    # you cert: //my_key/ca.cert.pem
    # you must copy the cert to the client and install it.


ğŸ”µ ä¸‹è½½æœåŠ¡å™¨ä¸Šçš„ /root/my_key/ca.cert.pem è¯ä¹¦åˆ°æœ¬åœ°
    å¹¶æŠŠ ca.cert.pem æ”¹åæˆ .cer åç¼€çš„ æ¯”å¦‚:  ca.cer

ğŸ”µ Mac OS è®¾ç½®
    åŒå‡»ca.cer å¯¼å…¥è¯ä¹¦... è¯ä¹¦å¯¼å…¥çš„ä½ç½®æ˜¯  system.
    å¯¼å…¥å å¿…é¡»å» è¯ä¹¦è½¯ä»¶ æ‰¾åˆ°å¯¹åº”è¯ä¹¦(ä¸€èˆ¬å¸¦çº¢å‰çš„é‚£ä¸ªå°±æ˜¯.) âœ å³é”® âœ ä¿¡æ¯ âœ  ä¿¡ä»» âœ  éƒ½ä¿¡ä»».... è¿™æ ·æ‰è¡Œ!!!


ğŸ”µ Macå®¢æˆ·ç«¯é…ç½®

    ç½‘ç»œè®¾ç½® âœ  æ·»åŠ  âœ  vpn âœ  ikev2 âœ 
        ğŸ“Œserver address : 23.105.192.96         è¿™é‡Œæ˜¯ä½ æœåŠ¡å™¨çš„ip
        ğŸ“Œremote id:       23.105.192.96         è¿™é‡Œæ˜¯ä½ æœåŠ¡å™¨çš„ip
        ğŸ“Œauthentication settings âœ username    é€‰æ‹© usernameè®¤è¯æ¨¡å¼
                  Username: è¾“å…¥å®‰è£…ç»“æœä¸­çš„ username  
                  password: è¾“å…¥å®‰è£…ç»“æœä¸­çš„ passeord
                  Apply âœ  connect å°±è¿æ¥ä¸Šäº†!!!






ğŸ”µ æŸ¥çœ‹ç‰ˆæœ¬: 

    âœ  ~ ipsec --version

ğŸ”µ å¯åŠ¨IPsec

    ipsec start.
    Starting strongSwan 5.5.1 IPsec [starter]...
    no netkey IPsec stack detected
    no KLIPS IPsec stack detected
    no known IPsec stack detected, ignoring!



ğŸ”µ æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¼€å¯. 
    âœ  ~ ps -aux | grep IPsec



ğŸ‘¹ æœ‰æ—¶å€™èƒ½è¿. æœ‰æ—¶å€™ä¸èƒ½è¿.ä¸ºä»€ä¹ˆ.. æˆ‘ä»¬ç”¨ wiresharkæ¥åˆ†æ.

    æœåŠ¡å™¨ip 23.105.192.96
    ipsec ä½¿ç”¨ç«¯å£ UDP 500

        1. wireshark: è®¾ç½®æ˜¾ç¤ºè¿‡æ»¤å™¨: ip==23.105.192.96  âœ ç„¶åå¼€å§‹æŠ“åŒ….
        2. å¼€å§‹è¿æ¥vpn; ç­‰vpnè¿æ¥å¤±è´¥å åœæ­¢æŠ“åŒ….
        3. åˆ†ææ•°æ®åŒ….
        ç‚¹å‡»wiresarkä¸­çš„ä»»ä½•ä¸€ä¸ªæ•°æ®åŒ…. å·¦è¾¹æœ‰ä¼šå‡ºç°ä¸€ä¸ªè™šçº¿.
        ä¸€èˆ¬å‘é€ä¸€ä¸ªæ•°æ®åŒ…. å¯¹æ–¹å°±è¦å›å¤ä¸€ä¸ªæ•°æ®åŒ…çš„.ç›¸å¯¹äºä¸€ä¸ªèŠå¤©.
        è™šçº¿å°±æ˜¯æ‰¾åˆ°é‚£ä¸ªèŠå¤©çš„æ”¶å‘è€…..

        é”™è¯¯ä¿¡æ¯ wireshark ä¼šç”¨é»‘è‰²æ¥æ˜¾ç¤º. 
        æˆ‘ä»¬è¿™é‡Œå°±æ˜¯:

        ğŸ‘¹ icmp destination unreachable (port unreachable)

        æ—¢ç„¶æ˜¯ç«¯å£ä¸å¯è¾¾. é‚£ä¹ˆå°±æ‰«ææœåŠ¡å™¨ç«¯å£å…ˆ.
        ğŸ”¸ æ‰«ææœåŠ¡å™¨çš„ 500 updç«¯å£.
            âœ˜âœ˜âˆ™ğ’— vps sudo nmap -sU -p 500 23.105.192.96

            Starting Nmap 7.25BETA1 ( https://nmap.org ) at 2017-05-09 10:58 CST
            Nmap scan report for mail.0214.help (23.105.192.96)
            Host is up (0.18s latency).
            PORT    STATE  SERVICE
            500/udp closed isakmp

            Nmap done: 1 IP address (1 host up) scanned in 0.50 seconds

        ç«¯å£ç¡®å®æ²¡å¼€. è¦ä¹ˆæ˜¯é˜²ç«å¢™åŸå› . è¦ä¹ˆå°±æ˜¯vpnæœåŠ¡æ²¡å¯åŠ¨..
        é¦–å…ˆå…³é—­æœåŠ¡å™¨é˜²ç«å¢™. service iptables stop
        åœ¨ namp 500 udpç«¯å£. è¿˜æ˜¯æ²¡å¼€.  é‚£å°±æ˜¯vpnæœåŠ¡æœ¬èº«çš„é—®é¢˜äº†.

            ipsec start
            å†nmapä¸‹ç«¯å£æœç„¶openäº†..
            ä¸«çš„ . åŸæ¥æ˜¯æœåŠ¡å™¨æ²¡æœ‰è®¾ç½® å¼€æœºå¯åŠ¨vpnå•Š.
            è®¾ç½®å¼€æœºå¯åŠ¨ipsec: vi /etc/rc.local  æ·»åŠ : ipsec start 

        å‘ç°å¼€å¯å¯åŠ¨æ²¡ç”¨å•Š. top æ²¡çœ‹åˆ°æœ‰charonçš„è¿›ç¨‹... 
        googleä¸‹. åŸæ¥åŠ è½½ rc.local æ–‡ä»¶çš„æ—¶å€™ ç¯å¢ƒè·¯å¾„çš„æ–‡ä»¶è¿˜æ²¡æœ‰åŠ è½½!!! 
        â—ï¸â—ï¸â—ï¸æ‰€ä»¥rc.local é‡Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„!!!â—ï¸â—ï¸â—ï¸
        â—ï¸â—ï¸â—ï¸æ‰€ä»¥rc.local é‡Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„!!!â—ï¸â—ï¸â—ï¸
        â—ï¸â—ï¸â—ï¸æ‰€ä»¥rc.local é‡Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„!!!â—ï¸â—ï¸â—ï¸
        type ipsec æŸ¥çœ‹ç»å¯¹è·¯å¾„. ipsec is /usr/local/sbin/ipsec
        è®¾ç½®å¼€æœºå¯åŠ¨ipsec: vi /etc/rc.local  æ·»åŠ : /usr/local/sbin/ipsec start 

        ç°åœ¨å°±å¥½äº†!!!!











